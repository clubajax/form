!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@clubajax/dom"),require("@clubajax/base-component"),require("@clubajax/dates"),require("@clubajax/on"),require("@clubajax/key-nav")):"function"==typeof define&&define.amd?define(["@clubajax/dom","@clubajax/base-component","@clubajax/dates","@clubajax/on","@clubajax/key-nav"],e):"object"==typeof exports?exports.form=e(require("@clubajax/dom"),require("@clubajax/base-component"),require("@clubajax/dates"),require("@clubajax/on"),require("@clubajax/key-nav")):t.form=e(t["@clubajax/dom"],t["@clubajax/base-component"],t["@clubajax/dates"],t["@clubajax/on"],t["@clubajax/key-nav"])}(this,(function(t,e,i,s,n){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=14)}([function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e,i){const s=i(1),n=i(0),a=i(17);let o;t.exports=s.define("ui-icon",class extends s{onType(t){o=void 0!==o?o:Boolean(n.queryAll("link").find(t=>/fontawesome/.test(t.href))),o||console.warn("Icon stylesheet missing"),this.className=a[t]||t}onColor(t){console.log("COLOR",t)}connected(){this.color&&(this.style.color=this.color)}},{props:["type","color"]})},function(t,e,i){const s=i(1),n=i(0),a=i(8);function o(t,e){e&&n.classList.remove(e,"T R B L"),n.style(t,{left:"",right:"",top:"",bottom:"",height:"",width:"",overflow:""})}function h(t,e,i){if(i&&1===i.length)return void function(t,e,i){const s=window.debugPopups,a=n.query(t,".ui-tooltip");o(t,a);const h={w:window.innerWidth,h:window.innerHeight},r=n.box(t),l=n.box(e),u={};function c(t){a&&a.classList.add(t)}function d(){return l.h>r.h?l.y+(l.h-r.h)/2:l.y-(r.h-l.h)/2}function p(){return l.w>r.w?l.x+(l.w-r.w)/2:l.x-(r.w-l.w)/2}function m(){u.top=d(),u.left=l.x+l.w+15,c("R")}function f(){u.top=d(),u.right=h.w-l.x+15,c("L")}function b(){u.left=p(),u.top=l.y+l.h+15,c("B")}function g(){u.left=p(),u.top=l.y-r.h-15,c("T")}s&&console.log("align:",i,"\nbutton:",e,"\npopup:",t,"\nwin",h,"\npop",r,"\nbtn",l);const v=()=>l.x+l.w+r.w+15<h.w,y=()=>l.x-r.w-15>0,D=()=>l.y-r.h-15>0,w=()=>l.y+l.h+r.h+15<h.h;switch(i){case"R":v()?m():y()?f():console.warn("Button is too wide to fit a tooltip next to it");break;case"L":y()?f():v()?m():console.warn("Button is too wide to fit a tooltip next to it");break;case"T":D()?g():w()?b():console.warn("Button is too tall to fit a tooltip above or below it");break;default:w()?b():D()?g():console.warn("Button is too tall to fit a tooltip above or below it")}n.style(t,u)}(t,e,i);o(t);const s=window.debugPopups,a={},h=n.style(document.body,"padding-left"),r={w:window.innerWidth,h:window.innerHeight},l=n.box(e),u=n.box(t),c=l.top,d=r.h-(l.top+l.h+5),p=r.w-l.x,m=l.x+l.w;s&&console.log("\nbutton:",e,"\npopup:",t,"\nwin",r,"\npop",u,"\nbtn",l,"\ntopSpace",c,"\nbotSpace",d,"\nleftSpace",m,"\nrightSpace",p),"right"===i||m>u.w&&m>p?(a.top=l.y+l.h,a.right=r.w-(l.x+l.w)):p>u.w?(a.top=l.y+l.h,a.left=l.x):p>m?(a.top=l.y+l.h,a.left=l.x,a.width=p-h):(a.top=l.y+l.h,a.right=r.w-(l.x+l.w),a.width=m-h),u.h>c&&u.h>d?d<200||c>1.5*d?(a.height=c-10,a.bottom=r.h-l.y,a.top="",a.overflow="auto"):(a.height=d-10,a.overflow="auto"):d<u.h&&(a.top="",a.bottom=r.h-l.y),n.style(t,a)}function r(t,e){return{resume:()=>{window.addEventListener("scroll",e=>{e.target.closest&&e.target.closest("ui-popup")||t(!0)},!0)},pause:()=>{window.removeEventListener("scroll",t)},remove:()=>{window.removeEventListener("scroll",t)}}}t.exports=s.define("ui-popup",class extends s{constructor(){super(),this.showing=!1,this.handleMediaQuery=this.handleMediaQuery.bind(this),this.align,this.buttonid,this.label}onOpen(t){this.onDomReady(()=>{t?this.show():this.hide()})}domReady(){if(this.component=this.children[0]||{},this.button=n.byId(this.buttonid),!this.button)throw new Error("ui-tooltip must be associated with a parent via the parentid");this.connectEvents(),this.parentNode||document.body.appendChild(this),this.mq=window.matchMedia("(max-width: 415px)"),this.mq.addListener(this.handleMediaQuery),this.handleMediaQuery(this.mq)}renderMobileButtons(){this["use-hover"]||(this.label&&(this.labelNode=n("label",{class:"ui-label",html:this.label}),n.place(this,this.labelNode,0)),n("div",{class:"ui-button-row",html:[n("button",{html:"Close",class:"ui-button tertiary"}),n("button",{html:"Done",class:"ui-button tertiary"})]},this),n.queryAll(this,".ui-button-row .ui-button").forEach((t,e)=>{this.mobileEvents=this.on(t,"click",()=>{1===e?this.component.emitEvent&&(this.component.blockEvent=!1,this.component.emitEvent(),this.component.blockEvent=!0):this.component.reset&&this.component.reset(),this.hide()})}))}removeMobileButtons(){n.queryAll(this,".ui-button-row .ui-button").forEach(t=>{n.destroy(t)}),n.destroy(this.labelNode),this.mobileEvents&&this.mobileEvents.remove()}connectEvents(){this.button&&(this["use-hover"]?this.connectHoverEvents():(this.clickoff=a.makeMultiHandle([a(this,"clickoff",t=>{t.target.hasAttribute("data-no-clickoff")||this.hide()}),r(this.hide.bind(this),this)]),this.on(this.button,"click",t=>{this.show()}),this.on(this.button,"keydown",t=>{"Enter"!==t.key||this.showing||(t.preventDefault(),this.show())})))}connectHoverEvents(){const t=this["hide-timer"]||500;let e;const i=()=>{clearTimeout(e),this.show()},s=i=>{!0!==i?e=setTimeout(()=>{this.hide()},t):this.hide()};this.on(this.button,"mouseenter",i),this.on(this.button,"mouseleave",s),this.on("mouseenter",i),this.on("mouseleave",s),this.clickOff=r(s),this.clickOff.resume()}handleMediaQuery(t){t.matches?(this.component.blockEvent=!0,this.isMobile=!0,o(this),this.classList.add("is-mobile"),this.renderMobileButtons()):(this.component.blockEvent=!1,this.isMobile=!1,this.classList.remove("is-mobile"),h(this,this.button),this.removeMobileButtons())}show(){this.showing||(this.showing=!0,this.classList.add("open"),this.clickoff&&this.clickoff.resume(),this.isMobile||h(this,this.button,this.align),this.fire("popup-open"))}hide(){this.showing&&!window.keepPopupsOpen&&(this.showing=!1,this.classList.remove("open"),this.clickoff&&this.clickoff.pause(),this.fire("popup-close"))}destroy(){this.clickoff&&this.clickoff.remove(),this.mq&&this.mq.removeListener(this.handleMediaQuery),super.destroy()}},{props:["buttonid","label","align","use-hover"],bools:["open"]})},function(t,e){t.exports=i},function(t,e,i){const s=i(4);function n(t,e,i){return Math.ceil(t/e)*e-(i?e:0)}function a(t){return t<10?"0"+t:""+t}function o(t){const e=d(t="object"==typeof t?s.format(t,"h:m a"):f(t)),i=p(t),n=m(t);if(isNaN(e)||isNaN(i))throw new Error("Invalid time "+time);const a=new Date;return a.setHours(e),a.setMinutes(i),a.setSeconds(n),a}function h(t){if(t.length<8)return!1;const e=d(t),i=p(t);return!isNaN(e)&&!isNaN(i)&&(!!/[ap]m/i.test(t)&&(!(e<0||e>12)&&!(i<0||i>59)))}function r(t,e){t=t.trim();let i=0;for(let s=0;s<t.length;s++)t.charAt(s)===e&&i++;return i}const l=/[0-9]/;const u={Shift:1,Enter:1,Delete:1,ArrowLeft:1,ArrowRight:1,Escape:1,Command:1,Tab:1,Meta:1,Alt:1};function c(t){const e=/am/i.test(t);let i=d(t);e&&12===i?i=0:e||12===i||(i+=12);let s=p(t);const n=m(t);if(isNaN(i)||isNaN(s))throw new Error("Invalid time "+time);return s*=60,i*=3600,i+s+n}function d(t){return parseInt(t.substring(0,2))}function p(t){return parseInt(t.substring(3,5))}function m(t){return 3===t.split(":").length?parseInt(t.substring(6,8)):0}function f(t){return t.replace(/\d+[\/-]\d+[\/-]\d+\s*/,"")}function b(t){return{less:e=>c(t)<c(e),greater:e=>c(t)>c(e),dateAndTime:()=>s.is(t).date()&&s.is(t).time(),time:()=>s.is(t).time(),date:()=>s.is(t).date(),type(){return this.dateAndTime()?"datetime":this.time()?"time":this.date()?"date":""}}}const g={is:b,addTimeToDate:function(t,e){if(!h(t))return e;let i=d(t);const s=p(t);return/pm/i.test(t)&&12!==i&&(i+=12),e.setHours(i),e.setMinutes(s),e},isTimeValid:h,isDateTimeValid:function(t){if(19!==t.length)return!1;if(2!==r(t," "))return!1;if(1!==r(t,":"))return!1;if(2!==r(t,"/"))return!1;const e=t.substring(0,10),i=t.substring(11);return s.is(e).valid()&&h(i)},isDateValid:function(t){return s.isValid(t)},incMinutes:function(t,e,i=1){const s="time"===b(t).type()?[3,5]:[14,16];let o=parseInt(t.substring(s[0],s[1]));const h=o;return o=n(o,i,-1===e),o===h&&(o+=e*i),o>59&&(o=0),o<0&&(o=45),`${t.substring(0,s[0])}${a(o)}${t.substring(s[1])}`},incHours:function(t,e){const i="time"===b(t).type()?[0,2]:[11,13];let s=parseInt(t.substring(i[0],i[1]));return s+=e,s<1?s=12:s>12&&(s=1),`${t.substring(0,i[0])}${a(s)}${t.substring(i[1])}`},incMonth:function(t,e){let i=parseInt(t.substring(0,2));return i+=e,i>12?i=1:i<=0&&(i=12),`${a(i)}${t.substring(2)}`},incDate:function(t,e){const i=s.toDate(t),n=s.getDaysInMonth(i);let o=parseInt(t.substring(3,5));return o+=e,o<=0?o=n:o>n&&(o=1),`${t.substring(0,2)}${a(o)}${t.substring(6)}`},incYear:function(t,e){let i=parseInt(t.substring(6,10));return i+=e,`${t.substring(0,5)}/${a(i)} ${t.substring(11)}`},round:n,pad:a,isNum:function(t){return l.test(t)},control:u,isArrowKey:{ArrowUp:1,ArrowDown:1},isControl:function(t){return u[t.key]},stopEvent:function(t){if(!t.metaKey&&!u[t.key])return t.preventDefault(),t.stopImmediatePropagation(),!1},nextNumPos:function(t,e){let i,s,n=!1;for(s=0;s<e.length;s++)if(!(s<t)&&(i=e.charAt(s),isNaN(parseInt(i))||(i=parseInt(i)),"number"==typeof i)){n=!0;break}return n?s:-1},removeCharAtPos:function(t,e){return t.substring(0,e)+t.substring(e+1)},replaceText:function(t,e,i,s,n){return e=e.padEnd(s-i,n),t.substring(0,i)+e+t.substring(s)},formatDate:function(t,e){function i(t){let i="";for(let s=t;s<e.length&&"X"!==e[s];s++)i+=e[s];return i}t=t.replace(/(?!X)\D/g,"");const s=e.match(/X/g).join("").length;let n="";const a=Math.min(t.length,s);for(let s=0;s<a;s++)"X"!==e[n.length]&&(n+=i(n.length)),n+=t[s];return n},formatTime:function(t){return(t=(t=t.replace(/(?!X)\D/g,"")).substring(0,4)).length<4&&(t=`0${t}`),t.length>=2&&((t=t.split("")).splice(2,0,":"),t=t.join("")),t},getAMPM:function(t){const e=/[ap]m/.exec(t);return e?e[0]:null},getMinDate:function(t){return(t="now"===t?new Date:s.toDate(t)).setMinutes(t.getMinutes()-2),t},getMaxDate:function(t){return(t="now"===t?new Date:s.toDate(t)).setMinutes(t.getMinutes()+2),t},toDateAriaLabel:function(t){return t=s.toDate(t),s.format(t,"d, E MMMM yyyy")},toDateTimeAriaLabel:function(t){return t=s.toDate(t),s.format(t,"d, E MMMM yyyy")},getMinTime:function(t){return(t="now"===t?new Date:s.toDate(t)).setSeconds(t.getSeconds()-2),t},getMaxTime:function(t){return(t="now"===t?new Date:s.toDate(t)).setSeconds(t.getSeconds()+2),t},timeIsInRange:function(t,e,i,n){if(!e&&!i)return!0;if(n)return!0;const a=o(t);return!(e&&!s.is(a).greater(o(e)))&&!(i&&!s.is(a).less(o(i)))},toDateTime:o,timeToSeconds:c,stripDate:f,charCount:r,mergeTime:function(t,e){return`${t.trim()} ${e.substring(11)}`}};window.getDatePickerUtil=()=>g,t.exports=g},function(t,e,i){const s=i(0);t.exports=function(t,e){if(t.blockEvent)return;(e="object"==typeof(e=void 0===e?t.value:e)?e:{value:e})&&(e.value=s.normalize(e.value));const i=t["event-name"]||"change";t["change"===i?"emit":"fire"](i,e,!0),t.__value=null!==e?e.value:null}},function(t,e){const i={};t.exports=function(t="uid"){return i[t]=i[t]||0,i[t]++,`${t}-${i[t]}`}},function(t,e){t.exports=s},function(t,e,i){const s=i(1),n=i(0),a=i(8),o=i(18),h=i(6),r="aria-label",l="alias",u="display",c="aria-selected",d="disabled",p="tabindex",m="value";function f(t){return Array.isArray(t)?t:[t]}function b(t){return`[value="${t}"]`}t.exports=s.define("ui-list",class extends s{constructor(){super(),this.sortdesc,this.sortasc,this.multiple,this.readonly,this.buttonid,this.label,this.lastValue=null}attributeChanged(t,e){"value"===t&&(this.value=e)}set value(t){this.lastValue=t,this.onDomReady(()=>{this.setControllerValue(t)}),this.__value=t}get value(){if(!this.controller)return this.__value||this.getAttribute("value");if(this.multiple)return this.controller.getSelected().map(t=>t.getAttribute("value"));const t=this.controller.getSelected();return t?t.getAttribute("value"):this.__value||null}set data(t){if("function"==typeof t)return this.lazyDataFN=t,void this.onConnected(()=>{this.render(),this.connect()});this.setData(t)}get data(){return this.items}onDisabled(){(this.items||this.lazyDataFN)&&this.connectEvents(),this.onDomReady(()=>{this.setTabIndicies()})}onReadonly(){this.connectEvents()}setLazyValue(t){this.lazyDataFN().find(e=>e.value===t)&&this.emitEvent()}setLazyData(){this.setData(this.lazyDataFN()),this.lazyDataFN=null,this.connectEvents(),this.fire("dom-update")}setData(t){(function(t,e){if(t===e)return!0;if(!(t&&e&&Array.isArray(t)&&Array.isArray(e)))return!1;return t.map(t=>t.value).join(",")===e.map(t=>t.value).join(",")})(this.orgData,t)||((t=f(t)).length&&"object"!=typeof t[0]&&(t=t.map(t=>({label:t,data:t}))),this.lazyDataFN||(this.__value=void 0),this.selectedNode=null,this.orgData=t,this.items=function(t,e,i){e&&t.sort((t,i)=>t[e]>i[e]?1:-1);i&&t.sort((t,e)=>t[i]<e[i]?1:-1);return t}([...t],this.sortdesc,this.sortasc),this.update(),this.onConnected(()=>{this.setItemsFromData()}))}addData(t){t=f(t),this.items=[...this.items||[],...t],this.setItemsFromData()}removeData(t){(t=f(t)).forEach(t=>{const e=this.items.findIndex(e=>e.value===t);-1===e&&console.warn("remove value, not found",t),this.items.splice(e,1)}),this.setItemsFromData()}setItemsFromData(){if(this.render(),this.list.innerHTML="",this.lazyDataFN&&!this.items&&(this.items=[]),n.isNode(this.items[0]))return void this.setDomData();const t=this.value,e=this.list;let i;this.items.forEach((function(s){if("divider"===s.type)return void n("li",{class:"divider"},e);if("label"===s.type)return void n("li",{class:"label",html:s.label},e);const a=s.alias?`${s.alias}: ${s.label}`:s.label;if(void 0===s.value)return i=n("div",{class:"label",html:a},e),void(i.unselectable=!0);const o={html:a,value:s.value};(s.selected||s.value===t)&&(o["aria-selected"]=!0),s.class&&(o.class=s.class),s.disabled&&(o.disabled=!0),i=n("li",o,e)})),this.appendChild(this.list),this.update(),this.connect()}initDomData(){let t;const e=this.value;for(this.render(),this.items=[];this.children.length;){const i=this.children[0];"li"!==i.localName&&console.warn("ui-list children should use LI's"),this.items.push({label:i.textContent,value:i.getAttribute(m)}),(i.hasAttribute(c)||i.getAttribute(m)===e)&&(this.selectedNode=i,this.orgSelected=i,this.items[this.items.length-1].selected=!0,e||(t=i.getAttribute(m))),this.list.appendChild(i)}this.update(),this.appendChild(this.list),this.connect(),this.disabled=this.hasAttribute(d),(t||e)&&this.select(t||e)}setDomData(){const t=this.list;this.items[0]&&11===this.items[0].nodeType?t.appendChild(this.items[0]):this.items.forEach(e=>{if("li"!==e.localName)throw new Error('list children should be of type "li"');e.getAttribute("value")||e.setAttribute("value",e.textContent.replace(/\s/g,"-").toLowerCase()),t.appendChild(e)}),this.appendChild(t),this.setItemsFromDom(),this.update(),this.connect()}setItemsFromDom(){this.items=[],[...this.list.children].forEach(t=>{"li"!==t.localName&&console.warn("ui-list children should use LI's"),this.items.push({label:t.getAttribute(r)||t.textContent,value:t.getAttribute(m),alias:t.getAttribute(l),display:t.getAttribute(u)})})}setControllerValue(t){if(this.controller)if(Array.isArray(t)){if(!this.multiple)throw new Error("Trying to set multiple values without the `multiple` attribute");const e=t.map(b).join(",");this.controller.setSelected(n.queryAll(this,e))}else this.controller.setSelected(n.query(this,b(t)));else console.warn("UIList.setControllerValue: No controller")}getItem(t){return this.items?this.items.find(e=>e.value===t||`${e.value}`===`${t}`):null}connected(){this.lazyDataFN&&this.update(),this.items&&(this.initDomData=()=>{})}domReady(){this.disabled||this.readonly||this.onDisabled(),this.items||this.lazyDataFN||this.initDomData()}emitEvent(){h(this,this.value)}update(){}setTabIndicies(){this.list&&(this.disabled?(this.removeAttribute(p),this.list.removeAttribute(p)):(this.setAttribute(p,"-1"),this.list.setAttribute(p,"0")))}connect(){this.connectController(),this.connectEvents(),this.connect=function(){}}connectController(){const t={canSelectNone:this.getAttribute("can-select-none"),multiple:this.multiple,searchTime:this.getAttribute("search-time"),externalSearch:this["external-search"],buttonId:this.buttonid,value:this.value};this.connectHandles=a.makeMultiHandle([this.on("click",()=>{this.list.focus()}),this.on("focus",()=>{this.list.focus()}),this.on("key-select",()=>{this.lastValue=this.value,this.emitEvent()})]),this.controller=o(this.list,t)}connectEvents(){if(this.lazyDataFN)return;const t=!this.readonly&&!this.disabled;this.setTabIndicies(),(t||this.controller)&&(!t&&this.controller?(this.controller.pause(),this.connectHandles.pause()):t&&this.controller&&(this.controller.resume(),this.connectHandles.resume()))}reset(){this.value=this.__value}render(){!this.labelNode&&this.label&&(this.labelNode=n("label",{html:this.label},this)),this.list||(this.list=n("ul",{}))}destroy(){super.destroy()}},{props:["label","limit","name","event-name","align","buttonid","external-search","sortdesc","sortasc"],bools:["disabled","readonly","multiple"],attrs:["value"]})},function(t,e,i){const s=i(5),n=i(4);function a(t){t!==this.validationError&&(this.validationError=t,this.fire("validation",{message:t},!0))}t.exports=function(t=this.input.value,e){if(!t&&this.required)return this.emitError("This field is required"),!1;if(!t)return!0;if(t.length>19)return a.call(this,"Not a valid date and time"),!1;if("time"!==e&&"date"!==e&&"datetime"!==e)return a.call(this,"Not a valid date and time"),!1;if("time"===e&&!s.isTimeValid(t))return a.call(this,"Not a valid time"),!1;if("date"===e&&!s.isDateValid(t))return a.call(this,"Not a valid date"),!1;if("datetime"===e&&!s.isDateTimeValid(t))return a.call(this,"Not a valid date and time"),!1;const i=t;return t=n.toDate(t),this.minDate&&n.is(t).less(this.minDate)?(a.call(this,"now"===(o=this.min)?"Value must be in the future":`Value is less than the minimum, ${o}`),!1):this.maxDate&&n.is(t).greater(this.maxDate)?(a.call(this,"now"===(h=this.max)?"Value must be in the past":`Value is greater than the maximum, ${h}`),!1):!(/time/.test(e)&&!s.isTimeValid(i))&&(a.call(this,null),!0);var o,h}},function(t,e,i){const s=i(1),n=i(0),a=i(6);i(2);t.exports=s.define("ui-input",class extends s{constructor(){super(),this.readonly,this.disabled,this.placeholder,this.icon,this.label}attributeChanged(t,e){"value"===t&&(this.value=e)}set value(t){this._value=null==t?"":t,this.setValue(this._value)}get value(){return this.input.value||null}setValue(t){this.input&&(this.input.value=t,this.setPlaceholder())}onIcon(t){this.iconNode.type=t}onLabel(){this.labelNode.innerHTML=this.label}onDisabled(t){this.input&&(this.input.disabled=t)}onReadonly(t){this.input&&(this.input.readonly=t)}setPlaceholder(){}emitEvent(t){t.stopPropagation(),this._value=this.input.value,a(this,this._value)}connected(){this.render(),this.connected=()=>{}}connect(){this.on(this.input,"blur",()=>{this.focused=!1,this.emit("blur")}),this.on(this.input,"focus",()=>{this.focused=!0,this.emit("focus")}),this.on(this.input,"change",this.emitEvent.bind(this))}render(){this.labelNode=n("label",{},this),this.input=n("input",{value:this._value||"",readonly:this.readonly,disabled:this.disabled,placeholder:this.placeholder||"Enter text..."},this),this.icon&&(this.iconNode=n("ui-icon",{type:this.icon},this),this.classList.add("has-icon")),this.setPlaceholder(),this.connect()}},{props:["placeholder","label","limit","name","event-name","align","icon"],bools:["disabled","ready","required","autofocus"],attrs:["value"]})},function(t,e,i){const s=i(1),n=i(4),a=i(0),o=i(5),h=i(10);i(23);const r=new Date;function l(t,e){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()?t.getDate():-999}function u(t){t&&a.destroy(t)}t.exports=s.define("date-picker",class extends s{constructor(){super(),this.dateType="date",this.current=new Date,this.previous={},this.container,this.time,this.monthNode,this.footerLink,this.calFooter,this.lftMoNode,this.rgtMoNode,this.lftYrNode,this.rgtYrNode}get templateString(){return'\n<div class="calendar" ref="calNode">\n<div class="cal-header" ref="headerNode">\n\t<button class="cal-yr-lft" ref="lftYrNode" tabindex="0" aria-label="Previous Year"></button>\n\t<button class="cal-lft" ref="lftMoNode" tabindex="0" aria-label="Previous Month"></button>\n\t<label class="cal-month" ref="monthNode"></label>\t\n\t<button class="cal-rgt" ref="rgtMoNode" tabindex="0"  aria-label="Next Month"></button>\n\t<button class="cal-yr-rgt" ref="rgtYrNode" tabindex="0" aria-label="Next Year"></button>\n</div>\n<div class="cal-container" ref="container"></div>\n<div class="cal-footer" ref="calFooter">\n\t<button ref="footerLink" class="today-button" aria-label="Set Date to Today"></button>\n</div>\n</div>\n<input class="focus-loop" aria-hidden="true"/>\n'}set value(t){this.setValue(n.isDate(t)?n.toDate(t):r)}get value(){if(!this.valueDate){const t=this.getAttribute("value")||r;this.valueDate=n.toDate(t)}return this.valueDate}onMin(t){console.log("PICK MIN",t),this.onDomReady(()=>{this.minDate=o.getMinDate(t),this.timeInput&&(this.timeInput.min=t),this.render()})}onMax(t){this.onDomReady(()=>{this.maxDate=o.getMaxDate(t),this.timeInput&&(this.timeInput.max=t),this.render()})}setDisplay(...t){2===t.length?(this.current.setFullYear(t[0]),this.current.setMonth(t[1])):"object"==typeof t[0]?(this.current.setFullYear(t[0].getFullYear()),this.current.setMonth(t[0].getMonth())):t[0]>12?this.current.setFullYear(t[0]):this.current.setMonth(t[0]),this.valueDate=n.copy(this.current),this.noEvents=!0,this.render()}getFormattedValue(){let t=this.valueDate===r?"":this.valueDate?n.format(this.valueDate):"";return this.time&&(t+=` ${this.timeInput.value}`),t}setAriaLabel(){const t=this.valueDate?this.timeInput?o.toDateTimeAriaLabel(this.valueDate):o.toDateAriaLabel(this.valueDate):"not set";this.setAttribute("aria-label",`Date Picker, current date: ${t}`)}setAriaMonthYearAlert(t){t?this.monthNode.setAttribute("role","alert"):this.monthNode.removeAttribute("role","alert")}emitEvent(t){const e=this.valueDate;if(this.time){if(!this.timeInput.valid)return void this.timeInput.validate();o.addTimeToDate(this.timeInput.value,e)}const i={value:this.getFormattedValue(),silent:t,date:e};this["range-picker"]&&(i.first=this.firstRange,i.second=this.secondRange),this[this.emitType](this.eventName,i,!0),this.setAriaLabel()}emitDisplayEvents(){const t=this.current.getMonth(),e=this.current.getFullYear();this.noEvents||t===this.previous.month&&e===this.previous.year||this.fire("display-change",{month:t,year:e}),this.noEvents=!1,this.previous={month:t,year:e}}onHide(){}onShow(){this.current=n.copy(this.valueDate),this.render(),setTimeout(this.focus.bind(this),100)}setValue(t){this.hasTime=!!this.timeInput;const e=n.format(t,this.timeInput?"MM/dd/yyyy h:m a":"MM/dd/yyyy");h.call(this,e,this.dateType)&&(this.valueDate=t,this.current=n.copy(this.valueDate),this.onDomReady(()=>{this.render(),this.setAriaLabel()}))}onClickDay(t,e){const i=+t.textContent,s=t.classList.contains("future"),a=t.classList.contains("past");t.classList.contains("disabled")?this.focusNode&&this.focusNode.focus():(this.current.setDate(i),s&&this.current.setMonth(this.current.getMonth()+1),a&&this.current.setMonth(this.current.getMonth()-1),this.valueDate=n.copy(this.current),this.timeInput&&this.timeInput.setDate(this.valueDate),this.emitEvent(e),this["range-picker"]&&this.clickSelectRange(),s||a?this.render():this.selectDay())}selectDay(){if(this["range-picker"])return;const t=this.querySelector(".selected"),e=this.dayMap[this.current.getDate()];t&&t.classList.remove("selected"),e.classList.add("selected")}focusDay(){const t=this.container.querySelector('div.highlighted[tabindex="0"]')||this.container.querySelector('div.selected[tabindex="0"]');t&&t.focus()}highlightDay(t){let e;if(this.isValidDate(t)){e=this.container.querySelector('div[tabindex="0"]'),e&&e.setAttribute("tabindex","-1");const i=t.getMonth()!==this.current||t.getFullYear()!==this.current.getFullYear();if(this.current=t,i)this.render();else{const t=o.toAriaLabel(this.current);e=this.container.querySelector(`div[aria-label="${t}"]`),e.setAttribute("tabindex","0")}this.focusDay()}}isValidDate(t){return t=n.zeroTime(t),(!this.minDate||!n.is(t).less(this.minDate))&&(!this.maxDate||!n.is(t).greater(this.maxDate))}onClickMonth(t){this.current.setMonth(this.current.getMonth()+t),this.render()}onClickYear(t){this.current.setFullYear(this.current.getFullYear()+t),this.render()}clearRange(){this.hoverDate=0,this.setRange(null,null)}setRange(t,e){this.firstRange=t,this.secondRange=e,this.displayRange(),this.setRangeEndPoints()}clickSelectRange(){const t=!!this.firstRange,e=!!this.secondRange,i=n.copy(this.current);this.isOwned?this.fire("select-range",{first:this.firstRange,second:this.secondRange,current:i}):(this.secondRange&&(this.fire("reset-range"),this.firstRange=null,this.secondRange=null),this.firstRange&&this.isValidRange(i)?(this.secondRange=i,this.hoverDate=0,this.setRange(this.firstRange,this.secondRange)):this.firstRange=null,this.firstRange||(this.hoverDate=0,this.setRange(i,null)),this.fire("select-range",{first:this.firstRange,second:this.secondRange,prevFirst:t,prevSecond:e}))}hoverSelectRange(t){this.firstRange&&!this.secondRange&&t.target.classList.contains("on")&&(this.hoverDate=t.target._date,this.displayRange())}displayRangeToEnd(){this.firstRange&&(this.hoverDate=n.copy(this.current),this.hoverDate.setMonth(this.hoverDate.getMonth()+1),this.displayRange())}displayRange(){let t=this.firstRange,e=this.secondRange?this.secondRange.getTime():this.hoverDate;const i=this.dayMap;t&&e?(t=t.getTime(),Object.keys(i).forEach((function(s,n){var a,o;a=i[s]._date,o=e,a>=t&&a<=o?i[s].classList.add("range"):i[s].classList.remove("range")}))):Object.keys(i).forEach((function(t,e){i[t].classList.remove("range")}))}hasRange(){return!!this.firstRange&&!!this.secondRange}isValidRange(t){return!this.firstRange||t.getTime()>this.firstRange.getTime()}setRangeEndPoints(){this.clearEndPoints(),this.firstRange&&(this.firstRange.getMonth()===this.current.getMonth()&&this.dayMap[this.firstRange.getDate()].classList.add("range-first"),this.secondRange&&this.secondRange.getMonth()===this.current.getMonth()&&this.dayMap[this.secondRange.getDate()].classList.add("range-second"))}clearEndPoints(){const t=this.querySelector(".range-first"),e=this.querySelector(".range-second");t&&t.classList.remove("range-first"),e&&e.classList.remove("range-second")}domReady(){this.eventName=this["event-name"]||"change",this.emitType="change"===this.eventName?"emit":"fire",this.setAttribute("tabindex","0"),this["range-left"]&&(this.classList.add("left-range"),this["range-picker"]=!0,this.isOwned=!0),this["range-right"]&&(this.classList.add("right-range"),this["range-picker"]=!0,this.isOwned=!0),this.isOwned&&this.classList.add("minimal"),this.current=n.copy(this.value),this.render(),this.connect(),this.setAriaLabel()}render(){const t=function(){const t=document.activeElement;if(!t||!a.classList.contains(t,"day"))return null;return t.getAttribute("aria-label")}();u(this.bodyNode),this.dayMap={};let e,i,s,h,c,d,p,m,f,b,g=a("div",{class:"cal-body"}),v=0,y=this["range-picker"],D=this.current,w=n.copy(D),x=n.getDaysInPrevMonth(D),M=n.getDaysInMonth(D),k=n.getFirstSunday(D),N=l(r,D),E=l(this.valueDate,D),R=D.getDate(),T=n.add(new Date(D.getFullYear(),D.getMonth(),1),k);for(this.monthNode.innerHTML=n.getMonthName(D)+" "+D.getFullYear(),e=0;e<7;e++)a("div",{html:n.days.abbr[e],class:"day-of-week"},g);for(console.log(" - ",this.minDate),e=0;e<42;e++){f=n.isLess(T,this.minDate)||n.isGreater(T,this.maxDate),i=k+1>0&&k+1<=M?k+1:"&nbsp;",s=!1,d=!1,b=!1,p=!1,k+1>0&&k+1<=M?(i=k+1,s=!0,c="day on",N===i&&(p=!0,c+=" today"),E!==i||y?i===R&&(c+=" highlighted",b=!0):(d=!0,m=!0,c+=" selected")):k<0?(i=x+k+1,c="day off past"):(i=++v,c="day off future"),f&&(c="day disabled",d&&(c+=" selected"),p&&(c+=" today"));const t=o.toDateAriaLabel(T);h=a("div",{html:a("span",{html:i,"data-no-clickoff":!0}),class:c,"aria-label":t,tabindex:d||b?0:-1},g),k++,T.setDate(T.getDate()+1),s&&(w.setDate(i),h._date=w.getTime(),this.dayMap[i]=h)}this.container.appendChild(g),this.bodyNode=g,this.setFooter(),this.displayRange(),this.setRangeEndPoints(),this.emitDisplayEvents(),this.timeInput&&this.timeInput.setDate(this.current),t&&(this.focusNode=a.query(this.bodyNode,`[aria-label="${t}"]`),this.focusNode&&this.focusNode.focus())}setFooter(){if(this.timeInput)this.current&&(this.timeInput.value=this.valueDate);else if(this.time)this.timeInput=a("time-input",{label:"Time:",required:!0,value:this.value,min:this.minDate,max:this.maxDate,"event-name":"time-change"},this.calFooter),this.timeInput.setDate(this.current),this.timeInput.on("time-change",t=>{this.emitEvent(t.detail.silent)}),u(this.footerLink);else{const t=new Date;this.footerLink.innerHTML=n.format(t,"E MMMM dd, yyyy")}}connect(){this.on(this.container,"click",t=>{this.fire("pre-click",t,!0);const e=t.target.closest(".day");e&&this.onClickDay(e)}),this.on(this.container,"keydown",t=>{let e;switch(t.key){case"ArrowLeft":e=-1;break;case"ArrowRight":e=1;break;case"ArrowUp":e=-7;break;case"ArrowDown":e=7;break;case"Enter":this.onClickDay(t.target);break;case" ":return this.onClickDay(t.target,!0),this.focusDay(),o.stopEvent(t)}if(e)return this.highlightDay(n.add(this.current,e)),t.preventDefault(),t.stopImmediatePropagation(),!1}),this.on(document,"keydown",t=>{if(" "===t.key&&((e=t.target)===(i=this).lftMoNode||e===i.rgtMoNode||e===i.lftYrNode||e===i.rgtYrNode||e===i.footerLink))return this.emit(t.target,"click"),o.stopEvent(t);var e,i}),this.on(this.lftMoNode,"click",()=>{this.onClickMonth(-1)}),this.on(this.rgtMoNode,"click",()=>{this.onClickMonth(1)}),this.on(this.lftYrNode,"click",()=>{this.onClickYear(-1)}),this.on(this.rgtYrNode,"click",()=>{this.onClickYear(1)}),this.on(this.footerLink,"click",()=>{this.setValue(new Date),this.emitEvent()}),[this.lftMoNode,this.rgtMoNode,this.lftYrNode,this.rgtYrNode].forEach(t=>{this.on(t,"blur",()=>{this.setAriaMonthYearAlert(!1)}),this.on(t,"focus",()=>{setTimeout(()=>{this.setAriaMonthYearAlert(!0)},30)})}),this["range-picker"]&&this.on(this.container,"mouseover",this.hoverSelectRange.bind(this))}},{bools:["range-picker","range-left","range-right","time"],props:["min","max","event-name"]})},function(t,e,i){const s=i(5);t.exports=function(t,e){let i=this.typedValue||"";const n=t.target.selectionStart,a=t.target.selectionEnd,o=t.key;if("Enter"===o){this.validate()&&(this.hide&&this.hide(),this.emit("change",{value:this.value}))}if("Escape"===o&&this.blur(),s.isControl(t))s.stopEvent(t);else{if(!s.isNum(o)){let i=this.input.value;if("datetime"===e&&" "===o&&2!==s.charCount(i," "))return this.typedValue="",i=i.replace(" ",""),this.setValue(`${i.substring(0,10)} ${i.substring(10,15)} ${i.substring(15)}`,!0),h(11),void s.stopEvent(t);if(i!==this.typedValue&&this.setValue(i,!0),s.isArrowKey[o]){const t="ArrowUp"===o?1:-1;if(/time/.test(e)){const o="time"===e?[0,2]:[11,13],h="time"===e?[3,5]:[14,16];a>=o[0]&&a<=o[1]?this.setValue(s.incHours(i,t),!0):a>=h[0]&&a<=h[1]?this.setValue(s.incMinutes(i,t,15),!0):("time"===e||n>16)&&this.setValue(i.replace(/([ap]m)/i,t=>/a/i.test(t)?"pm":"am"),!0)}/date/.test(e)&&(a<=2?this.setValue(s.incMonth(i,t),!0):a<5?this.setValue(s.incDate(i,t),!0):a<11&&this.setValue(s.incYear(i,t),!0))}else/[ap]/i.test(o)&&/time/.test(e)&&this.setValue(this.setAMPM(i,"a"===o?"am":"pm"),!0);return h(n),void s.stopEvent(t)}if(i.length!==a&&n===a){let e=this.typedValue.substring(0,n)+o+this.typedValue.substring(a+1);s.nextNumPos(n+1,e),this.setValue(e,!0);const r=i.charAt(n+1);return h(/[\s\/:]/.test(r)?n+2:n+1),void s.stopEvent(t)}if(a!==n){let e=s.replaceText(this.typedValue,o,n,a,"X");this.setValue(e,!0);return h(n+1),void s.stopEvent(t)}this.setValue(i+o,!0)}function h(e){t.target.selectionEnd=e}}},function(t,e,i){i(15),i(11),i(9),i(3),i(19),i(20),i(21),i(22),i(12),i(24),i(25)},function(t,e,i){const s=i(1),n=i(0),a=i(16),o=i(7);i(2);t.exports=s.define("ui-checkbox",class extends a{get value(){return this.indeterminate?null:Boolean(this.checked)}set value(t){this.checked=t}get event(){return{value:this.value,checked:this.checked,name:this.name}}onChecked(t){this.indeterminate&&(this.indeterminate=!1,this.input.type="check"),n.attr(this.input,"aria-checked",`${t}`)}onIndeterminate(t){t&&(this.input.type="minus")}setValue(t,e){this.value=t,!e&&this.canEmit()&&this.emitEvent()}toggle(){this.checked=!this.checked,this.canEmit()?this.emitEvent():this.fire("toggle",{value:this.value})}connected(){this.render(),this.on("keyup",t=>{this.canEmit()&&("Enter"!==t.key&&"Spacebar"!==t.key&&" "!==t.key||this.toggle())}),this.on("click",t=>{this.canEmit()&&this.toggle()}),this.connected=()=>{}}render(){const t=this.indeterminate?"minus":"check",e=this.label||"",i=this.label?this.id||o("checkbox"):null,s=this.label?this.id||o("label"):null;this.setAttribute("tabindex","0"),this.input=n("ui-icon",{type:t,id:i,role:"checkbox","aria-labelledby":s,"aria-checked":!1}),this.labelNode=n("span",{html:e,class:"ui-label",for:i,id:s}),this["check-after"]?(this.appendChild(this.labelNode),this.appendChild(this.input)):(this.appendChild(this.input),this.appendChild(this.labelNode)),n.attr(this,"label",!1)}},{bools:["checked","check-after","indeterminate"]})},function(t,e,i){const s=i(1),n=i(0),a=i(6);t.exports=s.define("ui-form-element",class extends s{onReadonly(t){n.attr(this,"tabindex",!t&&"0")}onDisabled(t){n.attr(this,"tabindex",!t&&"0")}onLabel(t){this.labelNode&&(this.labelNode.innerHTML=t)}canEmit(){return!this["no-event"]&&!this.readonly&&!this.disabled}emitEvent(){const t=this.event||{value:this.value,name:this.name};a(this,t)}},{props:["label","name","event-name","placeholder"],bools:["no-event","disabled","readonly","autofocus","required"],attrs:["value"]})},function(t,e){t.exports={check:"fas fa-check",minus:"fas fa-minus",plus:"fas fa-plus",books:"fas fa-book-reader",chess:"fas fa-chess-rook",error:"fas fa-exclamation-circle",warning:"fas fa-exclamation-triangle",caretDown:"fas fa-caret-down",angleLeft:"fas fa-angle-left",angleRight:"fas fa-angle-right",search:"fas fa-search",spinner:"fas fa-sync-alt",calendar:"far fa-calendar-alt",folder:"far fa-folder",file:"far fa-file-alt","file-archive":"far fa-file-archive","file-audio":"far far fa-file-audio","file-code":"far far fa-file-code","file-image":"far far fa-file-image","file-pdf":"far far fa-file-pdf","file-video":"far far fa-file-video","file-excel":"far far fa-file-excel","file-powerpoint":"far far fa-file-powerpoint","file-word":"far far fa-file-word"}},function(t,e){t.exports=n},function(t,e,i){const s=i(1),n=i(0),a=i(7),o=i(6);i(3),i(9),i(2);t.exports=s.define("ui-dropdown",class extends s{constructor(){super(),this.sortdesc,this.sortasc,this.label,this.placeholder,this.lastValue=null}set value(t){this.lastValue=t,this.list?this.list.value=t:this.onDomReady(()=>{this.list.value=t}),this.__value=t}get value(){return this.list?this.list.value:this.__value||this.getAttribute("value")}set data(t){this.onDomReady(()=>{const e=function(t){const e=t.find(t=>t.selected);return e?e.value:null}(t);e&&(this.value=e),this.list.data=t,(this["size-to-popup"]||this.autosized)&&this.sizeToPopup()}),this.__data=t}get data(){return this.list?this.list.items:this.__data}setDisplay(){this.button.innerHTML="";const t=this.list?this.list.getItem(this.value):{};var e;this.__value=t?t.value:this.__value,n("span",{html:(e=this.value,null==e?this.placeholder||"Select One...":t.alias||t.label)},this.button),this["no-arrow"]||n("ui-icon",{type:"caretDown"},this.button),setTimeout(()=>{this.popup&&n.style(this.popup,{"min-width":n.box(this.button).w})},500)}sizeToPopup(){n.style(this.button,{width:n.box(this.popup).w+20})}reset(){this.list.reset()}connected(){this.render(),this.connectEvents(),this.connected=()=>{}}connectEvents(){this.list.on("list-change",t=>{this.setDisplay(),this.lastValue+""!=this.value+""&&(o(this),this.lastValue=this.value),setTimeout(()=>{this.popup.hide()},300)}),this.popup.on("popup-open",()=>{this.list.controller.scrollTo(),this.fire("open")}),this.popup.on("popup-close",()=>{this.list.controller.scrollTo(),this.fire("close")})}renderButton(t){this.button=n("button",{id:t,class:"ui-button drop-input"},this),this.setDisplay()}render(){this.labelNode=n("label",{html:this.label,class:"ui-label"},this);const t=a("drop-button");this.renderButton(t),this.list=n("ui-list",{buttonid:t,"event-name":"list-change",sortdesc:this.sortdesc,sortasc:this.sortasc}),this.popup=n("ui-popup",{buttonid:t,label:this.label,html:this.list,class:"dropdown"},document.body),this.setDisplay()}disconnected(){this.popup.destroy()}},{props:["placeholder","label","limit","name","event-name","align","btn-class","sortdesc","sortasc"],bools:["disabled","open-when-blank","allow-new","required","case-sensitive","autofocus","busy","no-arrow","size-to-popup","autosized"],attrs:["value"]})},function(t,e,i){const s=i(1),n=i(0),a=i(7);i(3),i(9),i(2),i(11);t.exports=s.define("ui-search",class extends s{constructor(){super(),this.placeholder,this.busy,this.label}set value(t){this.onDomReady(()=>{this.list.value=t,this.setDisplay()}),this.__value=t}get value(){return this.list?this.list.value:this.__value||this.getAttribute("value")}set data(t){this.onDomReady(()=>{this.list.data=t,this.input.focused&&this.popup.show()}),this.__data=t}get data(){return this.list?this.list.items:this.__data}onBusy(t){this.input.icon=t?"spinner":"search"}setDisplay(){const t=this.list?this.list.getItem(this.value):{};this.__value=t?t.value:this.__value,this.input.value=null==this.value?"":t.display||t.alias||t.label,this.popup&&n.style(this.popup,{"min-width":n.box(this.input).w})}reset(){this.list.reset()}connected(){this.render(),this.connectEvents(),this.connected=()=>{}}connectEvents(){this.list.on("list-change",()=>{this.setDisplay(),this.emit("change",{value:this.value}),setTimeout(()=>{this.popup.hide()},300)}),this.input.on("key-search",t=>{this.fire("search",{value:t.detail.value})}),this.input.on("focus",()=>{this.classList.add("is-focused")}),this.input.on("focus",()=>{this.classList.remove("is-focused")})}renderButton(t){this.input=n("ui-input",{id:t,"event-name":"input-change",class:"search-input",placeholder:this.placeholder||"Begin typing...",icon:this.busy?"spinner":"search"},this),this.setDisplay()}render(){this.labelNode=n("label",{html:this.label,class:"ui-label"},this);const t=a("drop-button");this.renderButton(t),this.list=n("ui-list",{"event-name":"list-change","external-search":!0,buttonid:t}),this.popup=n("ui-popup",{buttonid:t,label:this.label,html:this.list},document.body),this.setDisplay()}},{props:["placeholder","label","limit","name","event-name","align","btn-class"],bools:["disabled","open-when-blank","allow-new","required","case-sensitive","autofocus","busy"],attrs:["value"]})},function(t,e,i){const s=i(1),n=i(0);i(3);t.exports=s.define("ui-tooltip",class extends s{constructor(){super(),this.open}domReady(){!this.value&&this.innerHTML.length&&(this.value=this.innerHTML,this.innerHTML=""),this.render()}render(){const t=this.align||"R";this.popup=n("ui-popup",{html:n("div",{class:`ui-tooltip ${this.className}`,html:this.value}),buttonid:this.parentNode,"use-hover":!0,align:t,"hide-timer":this["hide-timer"],open:this.open},document.body)}destroy(){super.destroy(),this.popup.destroy()}},{props:["align","hide-timer"],attrs:["value","open"]})},function(t,e,i){const s=i(1),n=i(0);i(8);function a(t){if(!t.openWidth){t.classList.remove("animate");const e=n.style(t,"width"),i=n.style(t,"height");n.style(t,{width:"",height:""}),t.openWidth=t.offsetWidth,t.openHeight=t.offsetHeight,t.classList.add("animate"),n.style(t,{width:e,height:i})}return{width:t.openWidth,height:t.openHeight}}t.exports=s.define("ui-drawer",class extends s{constructor(){super(),this.isOpen=!0}set open(t){this.isOpen=t,this.setOpen(t)}get open(){return this.isOpen}setOpen(t){const e=this.vertical?"height":"width";t?(a(this),setTimeout(()=>{n.style(this,{[e]:a(this)[e]})},1)):(this.style[e]||function(t,e){t.openWidth=t.offsetWidth,t.openHeight=t.offsetHeight,"width"===e?n.style(t,"width",t.openWidth):n.style(t,"height",t.offsetHeight)}(this,e),setTimeout(()=>{n.style(this,{[e]:this["closed-size"]||0})},1))}connected(){!1===n.normalize(n.attr(this,"open"))&&(this.isOpen=!1,this.setOpen(!1)),this.classList.add("animate"),this.classList.add("show"),this.on("transitionend",()=>{const t=this.isOpen?"open":"closed";this.emit(t)})}},{props:["closed-size"],bools:["vertical"]})},function(t,e,i){const s=i(1),n=(i(0),i(8),i(4)),a=i(5),o=i(13),h=i(10);t.exports=s.define("time-input",class extends s{attributeChanged(t,e){"value"===t&&(this.value=e)}set value(t){n.isValidObject(t)&&(t=n.format(t,"h:m a"),this.setAMPM(t)),this.strDate=a.stripDate(t),onDomReady(this,()=>{this.setValue(this.strDate)})}get value(){return this.strDate}get valid(){return this.isValid()}onLabel(t){this.labelNode.innerHTML=t}onMin(t){this.minDate=a.getMinDate(t),this.validate()}onMax(t){this.maxDate=a.getMaxDate(t),this.validate()}get templateString(){return'\n<label>\n\t<span ref="labelNode"></span>\n\t<input ref="input" class="empty" />\n</label>'}constructor(){super(),this.dateType="time",this.typedValue=""}setValue(t,e,i){let s=this.validate(t);return(/[ap]m/i.test(t)||t.replace(/(?!X)\D/g,"").length>=4)&&(this.setAMPM(t,function(t,e){if(e)return e;if(/a/i.test(t))return"am";if(/p/i.test(t))return"pm";return""}(t,i)),5===(t=a.formatTime(t)).length&&(t=this.setAMPM(t))),this.typedValue=t,this.input.value=t,s=this.validate(),s&&(this.strDate=t,e||this.emitEvent()),t}setDate(t){this.date=t,this.validate()}isValid(t=this.input.value){if(this.date){if(/X/.test(t))return!1;t=n.format(a.addTimeToDate(t,this.date),"MM/dd/yyyy h:m a")}return h.call(this,t,this.dateType)}validate(){return this.isValid()?(this.classList.remove("invalid"),this.emitError(null),!0):(this.classList.add("invalid"),!1)}onChange(t){this.date&&this.isValid(t.target.value)&&(this.setValue(t.target.value,!0),this.emitEvent(!0))}setAMPM(t,e){let i;return i=e?/a/i.test(e):/[ap]/.test(t)?/a/i.test(t):this.isAM,t=t.replace(/\s*[ap]m/i,"")+(i?" am":" pm"),this.isAM=i,this.isPM=!i,t}focus(){this.onDomReady(()=>{this.input.focus()})}blur(){this.onDomReady(()=>{this.input.blur(),this.validate(),this.emitEvent()})}domReady(){this.mask=this.mask||"XX:XX",this.maskLength=this.mask.match(/X/g).join("").length,this.input.setAttribute("type","text"),this.input.setAttribute("placeholder",this.placeholder||"HH:MM am/pm"),this.name&&this.input.setAttribute("name",this.name),this.label&&(this.labelNode.innerHTML=this.label),this.eventName=this["event-name"]||"change",this.emitType="change"===this.eventName?"emit":"fire",this.connectKeys()}emitEvent(t){const e=this.value;e!==this.lastValue&&this.isValid(e)&&(this.lastValue=e,this[this.emitType](this.eventName,{value:e,silent:t},!0))}emitError(t){t!==this.validationError&&(this.validationError=t,this.fire("validation",{message:t},!0))}connectKeys(){this.on(this.input,"keypress",a.stopEvent),this.on(this.input,"keyup",t=>{o.call(this,t,this.dateType),this.onChange(t)}),this.on(this.input,"blur",()=>this.blur.bind(this)),this.on(this.input,"input",t=>this.onChange.bind(this))}},{bools:["required","range-expands"],props:["label","name","placeholder","mask","event-name","min","max"],attrs:["value"]})},function(t,e,i){i(12);const s=i(1),n=i(0),a=i(4),o=i(5),h=i(13),r=i(10),l=i(7);i(3),i(2);t.exports=s.define("date-input",class extends s{constructor(){super(),this.dateType="date",this.showing=!1,this.fireOwnDomready=!0,this.static,this.labelNode,this.errorNode,this.input,this.hasTime,this.name,this.label,this.placeholder}attributeChanged(t,e){"value"===t&&(this.value=e)}set value(t){if(t===this.strDate)return;const e=!this.strDate;t=a.padded(t),this.strDate=a.isValid(t)?t:"",this.onDomReady(()=>{this.setValue(this.strDate,e)})}get value(){return this.strDate}get valid(){return this.isValid()}onLabel(t){this.labelNode.innerHTML=t}onMin(t){this.onDomReady(()=>{console.log("MIN::",t,a.toDate(t)),this.minDate=o.getMinDate("now"===t?new Date:a.toDate(t)),this.picker.min=t})}onMax(t){this.onDomReady(()=>{this.maxDate=o.getMaxDate("now"===t?new Date:a.toDate(t)),this.picker.max=t})}onValidation(t){this.errorNode.innerHTML=t.detail.message||""}get templateString(){return this.buttonId=l("button"),`\n<label>\n\t<span ref="labelNode"></span>\n\t<div class="date-input-wrapper">\n\t\t<input ref="input" class="empty" />\n        <button class="icon-button" id=${this.buttonId} ref="icon" aria-expanded="false" aria-label="Date Picker">\n            <ui-icon type="calendar" />\n        </button>\n    </div>\n    <div class="input-error" ref="errorNode"></div>\n</label>`}setValue(t,e){if(t===this.typedValue)return;"datetime"===this.dateType&&10===t.length&&this.typedValue.length>16&&(t=o.mergeTime(t,this.typedValue)),t=this.format(t),this.typedValue=t,this.input.value=t;const i=this.validate();return i&&(this.strDate=t,this.picker.value=t,e||this.emitEvent()),!e&&i&&setTimeout(this.hide.bind(this),300),t}emitEvent(){const t=this.value;t!==this.lastValue&&this.isValid(t)&&(this.lastValue=t,this.emit("change",{value:t}))}format(t){return o.formatDate(t,this.mask)}isValid(t=this.input.value){return r.call(this,t,this.dateType)}validate(){return this.isValid()?(this.classList.remove("invalid"),!0):(this.classList.add("invalid"),!1)}flash(t){this.classList.add("warning"),setTimeout(()=>{this.classList.remove("warning")},1e3),t&&this.focus()}show(){this.showing||(this.popup.show(),this.showing=!0,this.picker.onShow(),this.picker.classList.add("show"),this.picker.focus())}hide(){this.static||!this.showing||window.keepPopupsOpen||(this.popup.hide(),this.showing=!1,this.picker.onHide())}focus(){this.onDomReady(()=>{this.input.focus()})}blur(){this.input&&this.input.blur()}onBlur(){this.validate()?this.emitEvent():this.reset()}reset(){this.typedValue="",this.setValue(this.strDate||"",!0)}domReady(){this.time=this.time||this.hasTime,this.mask=this.mask||"XX/XX/XXXX",this.input.setAttribute("type","text"),this.input.setAttribute("placeholder",this.placeholder||"MM/DD/YYYY"),this.name&&this.input.setAttribute("name",this.name),this.label&&(this.labelNode.innerHTML=this.label),this.connectKeys(),this.popup=n("ui-popup",{buttonid:this.buttonId,class:"ui-date-input"},document.body),this.picker=n("date-picker",{time:this.time,tabindex:"0","event-name":"date-change"},this.popup),this.picker.onDomReady(()=>{this.picker.on("date-change",t=>{this.setValue(t.detail.value,t.detail.silent),this.hide()}),this.popup.on("popup-open",()=>{this.show()})}),window.onDomReady([this.picker,this.popup],()=>{this.static&&this.show(),this.fire("domready")})}connectKeys(){this.on(this.input,"keypress",o.stopEvent),this.on(this.input,"keyup",t=>{h.call(this,t,this.dateType)}),this.on(this.input,"blur",this.onBlur.bind(this)),this.on(this,"validation",this.onValidation.bind(this))}destroy(){this.focusHandle&&this.focusHandle.remove()}},{bools:["required","time","static"],props:["label","name","placeholder","mask","min","max","time","validation"],attrs:["value"]})},function(t,e,i){}])}));
//# sourceMappingURL=index.js.map