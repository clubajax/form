{"version":3,"sources":["webpack://form/webpack/universalModuleDefinition","webpack://form/webpack/bootstrap","webpack://form/external \"@clubajax/dom\"","webpack://form/external \"@clubajax/base-component\"","webpack://form/./src/ui-icon.js","webpack://form/./src/ui-popup.js","webpack://form/external \"@clubajax/dates\"","webpack://form/./src/date-picker/util.js","webpack://form/./src/lib/emitEvent.js","webpack://form/./src/lib/uid.js","webpack://form/external \"@clubajax/on\"","webpack://form/./src/ui-list.js","webpack://form/./src/date-picker/isValid.js","webpack://form/./src/ui-input.js","webpack://form/./src/date-picker/date-picker.js","webpack://form/./src/date-picker/onKey.js","webpack://form/./build-profiles/webpack-index.js","webpack://form/./src/ui-checkbox.js","webpack://form/./src/lib/BaseField.js","webpack://form/./src/lib/icon-map.js","webpack://form/external \"@clubajax/key-nav\"","webpack://form/./src/ui-dropdown.js","webpack://form/./src/ui-search.js","webpack://form/./src/ui-tooltip.js","webpack://form/./src/ui-drawer.js","webpack://form/./src/date-picker/time-input.js","webpack://form/./src/date-picker/date-input.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__4__","__WEBPACK_EXTERNAL_MODULE__8__","__WEBPACK_EXTERNAL_MODULE__18__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","BaseComponent","dom","iconMap","missing","onType","type","undefined","Boolean","queryAll","find","link","test","href","console","warn","className","onColor","log","connected","color","style","props","on","clearPosition","popup","tooltip","classList","remove","left","right","top","bottom","height","width","overflow","position","button","align","length","LOG","window","debugPopups","query","win","w","innerWidth","h","innerHeight","pop","box","btn","addClass","cls","add","midY","y","midX","x","fitR","fitL","fitT","fitB","positionTooltip","bodyPad","document","body","topSpace","botSpace","rightSpace","leftSpace","GAP","onScroll","hide","resume","addEventListener","e","target","closest","pause","removeEventListener","constructor","super","showing","handleMediaQuery","buttonid","label","onOpen","onDomReady","show","domReady","component","children","byId","Error","connectEvents","parentNode","appendChild","mq","matchMedia","addListener","renderMobileButtons","labelNode","class","html","place","forEach","mobileEvents","emitEvent","blockEvent","reset","removeMobileButtons","destroy","connectHoverEvents","clickoff","makeMultiHandle","hasAttribute","preventDefault","HIDE_TIMEOUT","timer","clearTimeout","immediate","setTimeout","clickOff","event","matches","isMobile","fire","keepPopupsOpen","removeListener","bools","dates","round","down","Math","ceil","pad","num","toDateTime","hr","getHours","format","stripDate","mn","getMinutes","sc","getSeconds","isNaN","time","date","Date","setHours","setMinutes","setSeconds","isTimeValid","charCount","str","char","trim","count","charAt","numReg","control","timeToSeconds","isAM","parseInt","substring","split","replace","is","less","greater","dateAndTime","util","addTimeToDate","isDateTimeValid","valid","isDateValid","isValid","incMinutes","inc","mult","MN","org","incHours","HR","incMonth","mo","incDate","toDate","max","getDaysInMonth","dt","incYear","yr","isNum","k","isArrowKey","isControl","stopEvent","metaKey","stopImmediatePropagation","nextNumPos","beg","found","removeCharAtPos","pos","replaceText","chars","end","xChars","padEnd","formatDate","mask","sub","subStr","maskLength","match","join","f","len","min","formatTime","splice","getAMPM","result","exec","getMinDate","getMaxDate","toDateAriaLabel","toDateTimeAriaLabel","getMinTime","getMaxTime","timeIsInRange","mergeTime","datetime","getDatePickerUtil","instance","normalize","eventName","__value","uidMap","prefix","keys","ATTR","toArray","data","Array","isArray","getSelector","val","sortdesc","sortasc","multiple","readonly","lastValue","attributeChanged","prop","setControllerValue","controller","getAttribute","getSelected","map","node","lazyDataFN","onConnected","render","connect","setData","items","onDisabled","setTabIndicies","onReadonly","setLazyValue","setLazyData","a","b","isEqual","orgData","item","selectedNode","desc","asc","sort","update","setItemsFromData","addData","removeData","values","index","findIndex","list","innerHTML","isNode","setDomData","parentValue","alias","unselectable","options","selected","disabled","initDomData","postValue","child","localName","push","textContent","orgSelected","select","nodeType","setAttribute","toLowerCase","setItemsFromDom","display","selector","setSelected","getItem","removeAttribute","connectController","canSelectNone","searchTime","externalSearch","buttonId","connectHandles","focus","enabled","attrs","emitError","msg","validationError","message","input","required","strValue","minDate","maxDate","placeholder","icon","_value","setValue","setPlaceholder","onIcon","iconNode","onLabel","stopPropagation","focused","emit","today","getSelectedDate","current","getMonth","getFullYear","getDate","dateType","previous","container","monthNode","footerLink","calFooter","lftMoNode","rgtMoNode","lftYrNode","rgtYrNode","isDate","valueDate","onMin","timeInput","onMax","setDisplay","args","setFullYear","setMonth","copy","noEvents","getFormattedValue","setAriaLabel","ariaLabel","setAriaMonthYearAlert","silent","validate","first","firstRange","second","secondRange","emitType","emitDisplayEvents","month","year","onHide","onShow","valueObject","hasTime","strDate","onClickDay","day","isFuture","contains","isPast","focusNode","setDate","clickSelectRange","selectDay","now","querySelector","dayMap","focusDay","highlightDay","isValidDate","shouldRerender","dateSelector","toAriaLabel","zeroTime","onClickMonth","direction","onClickYear","clearRange","hoverDate","setRange","displayRange","setRangeEndPoints","prevFirst","prevSecond","rangeDate","isOwned","isValidRange","hoverSelectRange","_date","displayRangeToEnd","getTime","dateTime","endTime","hasRange","clearEndPoints","activeElement","getFocusedDay","bodyNode","tx","isThisMonth","css","isSelected","isToday","hasSelected","minmax","isHighlighted","nextMonth","isRange","daysInPrevMonth","getDaysInPrevMonth","daysInMonth","dateNum","getFirstSunday","dateToday","dateSelected","highlighted","dateObj","getMonthName","days","abbr","isLess","isGreater","tabindex","setFooter","detail","picker","typedValue","selectionStart","selectionEnd","blur","setSelection","setAMPM","temp","nextChar","FormElement","uid","indeterminate","checked","onChecked","attr","onIndeterminate","canEmit","toggle","chkId","id","lblId","role","check","minus","plus","books","chess","error","warning","caretDown","angleLeft","angleRight","search","spinner","calendar","getValueFromList","sizeToPopup","__data","scrollTo","renderButton","disconnected","busy","onBusy","open","getSize","openWidth","widthStyle","heightStyle","offsetWidth","openHeight","offsetHeight","isOpen","_open","setOpen","dim","vertical","setSize","onKey","isValidObject","ampm","onChange","isPM","connectKeys","fireOwnDomready","static","errorNode","isInit","padded","onValidation","flash","addFocus","onBlur","focusHandle"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@clubajax/dom\"), require(\"@clubajax/base-component\"), require(\"@clubajax/dates\"), require(\"@clubajax/on\"), require(\"@clubajax/key-nav\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@clubajax/dom\", \"@clubajax/base-component\", \"@clubajax/dates\", \"@clubajax/on\", \"@clubajax/key-nav\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"form\"] = factory(require(\"@clubajax/dom\"), require(\"@clubajax/base-component\"), require(\"@clubajax/dates\"), require(\"@clubajax/on\"), require(\"@clubajax/key-nav\"));\n\telse\n\t\troot[\"form\"] = factory(root[\"@clubajax/dom\"], root[\"@clubajax/base-component\"], root[\"@clubajax/dates\"], root[\"@clubajax/on\"], root[\"@clubajax/key-nav\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__4__, __WEBPACK_EXTERNAL_MODULE__8__, __WEBPACK_EXTERNAL_MODULE__18__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","const BaseComponent = require('@clubajax/base-component');\nconst dom = require('@clubajax/dom');\nconst iconMap = require('./lib/icon-map');\n\nclass UiIcon extends BaseComponent {\n    onType(type) { \n        // console.log('TYPE', type);\n        // if (!iconMap[type]) console.warn('icon type missing:', type);\n        if (!missingStylesheet()) {\n            console.warn('Icon stylesheet missing');\n        }\n        this.className = iconMap[type] || type;\n    }\n    onColor(value) {\n        // why doesn't this work?\n        console.log('COLOR', value);\n    }\n\n    connected() {\n        if (this.color) {\n            this.style.color = this.color;\n        }\n    }\n}\n\nlet missing;\nfunction missingStylesheet() {\n    missing = missing !== undefined ? missing : Boolean(dom.queryAll('link').find(link => /fontawesome/.test(link.href)));\n    return missing;\n}\n\nmodule.exports = BaseComponent.define('ui-icon', UiIcon, {\n    props: ['type', 'color']\n});\n","const BaseComponent = require('@clubajax/base-component');\nconst dom = require('@clubajax/dom');\nconst on = require('@clubajax/on');\n\n// detach popup from body when not showing\n// - unless keepPopupsAttached\nclass UiPopup extends BaseComponent {\n    constructor() {\n        super();\n        this.showing = false;\n        this.handleMediaQuery = this.handleMediaQuery.bind(this);\n        this.align;\n        this.buttonid;\n        this.label;\n    }\n\n    onOpen(value) {\n        this.onDomReady(() => {\n            if (value) {\n                this.show();\n            } else {\n                this.hide();\n            }\n        });\n    }\n\n    domReady() {\n        this.component = this.children[0] || {};\n        this.button = dom.byId(this.buttonid);\n        if (!this.button) {\n            throw new Error(\n                'ui-tooltip must be associated with a parent via the parentid'\n            );\n        }\n\n        this.connectEvents();\n        if (!this.parentNode) {\n            document.body.appendChild(this);\n        }\n\n        this.mq = window.matchMedia('(max-width: 415px)');\n        this.mq.addListener(this.handleMediaQuery);\n        this.handleMediaQuery(this.mq);\n    }\n\n    renderMobileButtons() {\n        if (this['use-hover']) {\n            // this is a tooltip, not a dropdown\n            return;\n        }\n        // mobile label for dropdowns\n        if (this.label) {\n            this.labelNode = dom('label', {\n                class: 'ui-label',\n                html: this.label,\n            });\n            dom.place(this, this.labelNode, 0);\n        }\n        // mobile button for dropdowns\n        dom(\n            'div',\n            {\n                class: 'ui-button-row',\n                html: [\n                    dom('button', {\n                        html: 'Close',\n                        class: 'ui-button tertiary',\n                    }),\n                    dom('button', {\n                        html: 'Done',\n                        class: 'ui-button tertiary',\n                    }),\n                ],\n            },\n            this\n        );\n        dom.queryAll(this, '.ui-button-row .ui-button').forEach((button, i) => {\n            this.mobileEvents = this.on(button, 'click', () => {\n                if (i === 1) {\n                    if (this.component.emitEvent) {\n                        this.component.blockEvent = false;\n                        this.component.emitEvent();\n                        this.component.blockEvent = true;\n                    }\n                } else if (this.component.reset) {\n                    this.component.reset();\n                }\n                this.hide();\n            });\n        });\n    }\n\n    removeMobileButtons() {\n        dom.queryAll(this, '.ui-button-row .ui-button').forEach(button => {\n            dom.destroy(button);\n        });\n        dom.destroy(this.labelNode);\n        if (this.mobileEvents) {\n            this.mobileEvents.remove();\n        }\n    }\n\n    connectEvents() {\n        if (this.button) {\n            if (this['use-hover']) {\n                this.connectHoverEvents();\n            } else {\n                this.clickoff = on.makeMultiHandle([\n                    on(this, 'clickoff', (e) => {\n                        if (!e.target.hasAttribute('data-no-clickoff')) {\n                            this.hide();\n                        }\n                    }),\n                    onScroll(this.hide.bind(this), this),\n                ]);\n                this.on(this.button, 'click', e => {\n                    this.show();\n                });\n                this.on(this.button, 'keydown', e => {\n                    if (e.key === 'Enter' && !this.showing) {\n                        // prevent key-nav from detecting Enter when not open\n                        e.preventDefault();\n                        this.show();\n                    }\n                });\n            }\n        }\n    }\n\n    connectHoverEvents() {\n        const HIDE_TIMEOUT = this['hide-timer'] || 500;\n        let timer;\n        const show = () => {\n            clearTimeout(timer);\n            this.show();\n        };\n        const hide = immediate => {\n            if (immediate === true) {\n                this.hide();\n                return;\n            }\n            timer = setTimeout(() => {\n                this.hide();\n            }, HIDE_TIMEOUT);\n        };\n        this.on(this.button, 'mouseenter', show);\n        this.on(this.button, 'mouseleave', hide);\n        this.on('mouseenter', show);\n        this.on('mouseleave', hide);\n        this.clickOff = onScroll(hide);\n        this.clickOff.resume();\n    }\n\n    handleMediaQuery(event) {\n        if (event.matches) {\n            this.component.blockEvent = true;\n            this.isMobile = true;\n            clearPosition(this);\n            this.classList.add('is-mobile');\n            this.renderMobileButtons();\n        } else {\n            this.component.blockEvent = false;\n            this.isMobile = false;\n            this.classList.remove('is-mobile');\n            position(this, this.button);\n            this.removeMobileButtons();\n        }\n    }\n\n    show() {\n        if (this.showing) {\n            return;\n        }\n        this.showing = true;\n        this.classList.add('open');\n        if (this.clickoff) {\n            this.clickoff.resume();\n        }\n        if (!this.isMobile) {\n            position(this, this.button, this.align);\n        }\n        this.fire('popup-open');\n    }\n\n    hide() {\n        if (!this.showing || window.keepPopupsOpen) {\n            return;\n        }\n        this.showing = false;\n        this.classList.remove('open');\n        if (this.clickoff) {\n            this.clickoff.pause();\n        }\n        this.fire('popup-close');\n    }\n\n    destroy() {\n        if (this.clickoff) {\n            this.clickoff.remove();\n        }\n        if (this.mq) {\n            this.mq.removeListener(this.handleMediaQuery);\n        }\n        super.destroy();\n    }\n}\n\nfunction clearPosition(popup, tooltip) {\n    if (tooltip) {\n        dom.classList.remove(tooltip, 'T R B L');\n    }\n    dom.style(popup, {\n        left: '',\n        right: '',\n        top: '',\n        bottom: '',\n        height: '',\n        width: '',\n        overflow: '',\n    });\n}\n\nfunction positionTooltip(popup, button, align) {\n    const LOG = window.debugPopups;\n    const tooltip = dom.query(popup, '.ui-tooltip');\n    clearPosition(popup, tooltip);\n    const win = {\n        w: window.innerWidth,\n        h: window.innerHeight,\n    };\n    const pop = dom.box(popup);\n    const btn = dom.box(button);\n    const GAP = 15;\n    const style = {};\n\n    LOG &&\n        console.log(\n            'align:',\n            align,\n            '\\nbutton:',\n            button,\n            '\\npopup:',\n            popup,\n            '\\nwin',\n            win,\n            '\\npop',\n            pop,\n            '\\nbtn',\n            btn\n        );\n\n    function addClass(cls) {\n        if (tooltip) {\n            tooltip.classList.add(cls);\n        }\n    }\n\n    function midY() {\n        if (btn.h > pop.h) {\n            return btn.y + (btn.h - pop.h) / 2;\n        }\n        return btn.y - (pop.h - btn.h) / 2;\n    }\n    function midX() {\n        if (btn.w > pop.w) {\n            return btn.x + (btn.w - pop.w) / 2;\n        }\n        return btn.x - (pop.w - btn.w) / 2;\n    }\n    function right() {\n        style.top = midY();\n        style.left = btn.x + btn.w + GAP;\n        addClass('R');\n    }\n    function left() {\n        style.top = midY();\n        style.right = win.w - btn.x + GAP;\n        addClass('L');\n    }\n    function bottom() {\n        style.left = midX();\n        style.top = btn.y + btn.h + GAP;\n        addClass('B');\n    }\n    function top() {\n        style.left = midX();\n        style.top = btn.y - pop.h - GAP;\n        addClass('T');\n    }\n\n    const fitR = () => btn.x + btn.w + pop.w + GAP < win.w;\n    const fitL = () => btn.x - pop.w - GAP > 0;\n    const fitT = () => btn.y - pop.h - GAP > 0;\n    const fitB = () => btn.y + btn.h + pop.h + GAP < win.h;\n\n    switch (align) {\n        case 'R':\n            if (fitR()) {\n                right();\n            } else if (fitL()) {\n                left();\n            } else {\n                console.warn('Button is too wide to fit a tooltip next to it');\n            }\n            break;\n        case 'L':\n            if (fitL()) {\n                left();\n            } else if (fitR()) {\n                right();\n            } else {\n                console.warn('Button is too wide to fit a tooltip next to it');\n            }\n            break;\n        case 'T':\n            if (fitT()) {\n                top();\n            } else if (fitB()) {\n                bottom();\n            } else {\n                console.warn(\n                    'Button is too tall to fit a tooltip above or below it'\n                );\n            }\n            break;\n        default:\n            if (fitB()) {\n                bottom();\n            } else if (fitT()) {\n                top();\n            } else {\n                console.warn(\n                    'Button is too tall to fit a tooltip above or below it'\n                );\n            }\n    }\n\n    dom.style(popup, style);\n}\n\nfunction position(popup, button, align) {\n    if (align && align.length === 1) {\n        // TODO: may want to use TRBL for dropdowns\n        // consider checking for a tooltip node instead\n        positionTooltip(popup, button, align);\n        return;\n    }\n    clearPosition(popup);\n    const LOG = window.debugPopups;\n\n    const GAP = 5;\n    const MIN_BOT_SPACE = 200;\n\n    const style = {};\n    const bodyPad = dom.style(document.body, 'padding-left');\n    const win = {\n        w: window.innerWidth,\n        h: window.innerHeight,\n    };\n    const btn = dom.box(button);\n    const pop = dom.box(popup);\n    const topSpace = btn.top;\n    const botSpace = win.h - (btn.top + btn.h + GAP);\n    const rightSpace = win.w - btn.x;\n    const leftSpace = btn.x + btn.w;\n\n    LOG &&\n        console.log(\n            '\\nbutton:',\n            button,\n            '\\npopup:',\n            popup,\n            '\\nwin',\n            win,\n            '\\npop',\n            pop,\n            '\\nbtn',\n            btn,\n            '\\ntopSpace',\n            topSpace,\n            '\\nbotSpace',\n            botSpace,\n            '\\nleftSpace',\n            leftSpace,\n            '\\nrightSpace',\n            rightSpace\n        );\n\n    // position left/right & width\n    if (align === 'right' || (leftSpace > pop.w && leftSpace > rightSpace)) {\n        // left-side\n        style.top = btn.y + btn.h;\n        style.right = win.w - (btn.x + btn.w);\n    } else if (rightSpace > pop.w) {\n        // right-side\n        style.top = btn.y + btn.h;\n        style.left = btn.x;\n    } else if (rightSpace > leftSpace) {\n        // right-side, resize popup\n        style.top = btn.y + btn.h;\n        style.left = btn.x;\n        style.width = rightSpace - bodyPad;\n    } else {\n        // left-side, resize popup\n        style.top = btn.y + btn.h;\n        style.right = win.w - (btn.x + btn.w);\n        style.width = leftSpace - bodyPad;\n    }\n\n    // position top/bottom & height\n    if (pop.h > topSpace && pop.h > botSpace) {\n        if (botSpace < MIN_BOT_SPACE || topSpace > botSpace * 1.5) {\n            // force top\n            style.height = topSpace - GAP * 2;\n            style.bottom = win.h - btn.y;\n            style.top = '';\n            style.overflow = 'auto';\n        } else {\n            // force bottom\n            style.height = botSpace - GAP * 2;\n            style.overflow = 'auto';\n        }\n    } else if (botSpace < pop.h) {\n        // top\n        style.top = '';\n        style.bottom = win.h - btn.y;\n    }\n\n    dom.style(popup, style);\n}\n\nfunction onScroll(hide, popup) {\n    return {\n        resume: () => {\n            window.addEventListener(\n                'scroll',\n                (e) => {\n                    if (e.target.closest && e.target.closest('ui-popup')) {\n                        return;\n                    }\n                    hide(true);\n                },\n                true\n            );\n        },\n        pause: () => {\n            window.removeEventListener('scroll', hide);\n        },\n        remove: () => {\n            window.removeEventListener('scroll', hide);\n        },\n    };\n}\nmodule.exports = BaseComponent.define('ui-popup', UiPopup, {\n    props: ['buttonid', 'label', 'align', 'use-hover'],\n    bools: ['open'],\n});\n","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","const dates = require('@clubajax/dates');\n\nfunction round (n, r, down) {\n\treturn (Math.ceil(n / r) * r) - (down ? r : 0);\n}\n\nfunction incMinutes (value, inc, mult = 1) {\n\n\tconst type = is(value).type();\n\tconst MN = type === 'time' ? [3,5] : [14,16];\n\n\tlet mn = parseInt(value.substring(MN[0], MN[1]));\n\tconst org = mn;\n\n\tmn = round(mn, mult, inc === -1);\n\n\tif (mn === org) {\n\t\tmn += (inc * mult);\n\t}\n\n\tif (mn > 59) {\n\t\tmn = 0;\n\t}\n\tif (mn < 0) {\n\t\tmn = 45;\n\t}\n\n\treturn `${value.substring(0, MN[0])}${pad(mn)}${value.substring(MN[1])}`;\n}\n\nfunction incHours (value, inc) {\n\tconst type = is(value).type();\n\tconst HR = type === 'time' ? [0,2] : [11,13];\n\tlet hr = parseInt(value.substring(HR[0], HR[1]));\n\thr += inc;\n\tif (hr < 1) {\n\t\thr = 12;\n\t} else if (hr > 12) {\n\t\thr = 1;\n\t}\n\treturn `${value.substring(0, HR[0])}${pad(hr)}${value.substring(HR[1])}`;\n}\n\nfunction incMonth (value, inc) {\n\tlet mo = parseInt(value.substring(0,2));\n\tmo += inc;\n\tif (mo > 12) {\n\t\tmo = 1;\n\t} else if (mo <= 0) {\n\t\tmo = 12;\n\t}\n\treturn `${pad(mo)}${value.substring(2)}`;\n}\n\nfunction incDate (value, inc) {\n\tconst date = dates.toDate(value);\n\tconst max = dates.getDaysInMonth(date);\n\tlet dt = parseInt(value.substring(3,5));\n\tdt += inc;\n\tif (dt <= 0) {\n\t\tdt = max;\n\t} else if (dt > max) {\n\t\tdt = 1;\n\t}\n\treturn `${value.substring(0,2)}${pad(dt)}${value.substring(6)}`;\n}\n\nfunction incYear (value, inc) {\n\tlet yr = parseInt(value.substring(6,10));\n\tyr += inc;\n\treturn `${value.substring(0,5)}/${pad(yr)} ${value.substring(11)}`;\n}\n\nfunction pad (num) {\n\tif (num < 10) {\n\t\treturn '0' + num;\n\t}\n\treturn '' + num;\n}\n\nfunction toDateTime (value) {\n\t// FIXME: toTime() or to strTime() or DELETE - only used in util\n\tif (typeof value === 'object') {\n\t\tvalue = dates.format(value, 'h:m a');\n\t} else {\n\t\tvalue = stripDate(value);\n\t}\n\tconst hr = getHours(value);\n\tconst mn = getMinutes(value);\n\tconst sc = getSeconds(value);\n\tif (isNaN(hr) || isNaN(mn)) {\n\t\tthrow new Error('Invalid time ' + time);\n\t}\n\tconst date = new Date();\n\tdate.setHours(hr);\n\tdate.setMinutes(mn);\n\tdate.setSeconds(sc);\n\treturn date;\n}\n\nfunction isTimeValid (value) {\n\t// 12:34 am\n\tif (value.length < 8) {\n\t\treturn false;\n\t}\n\tconst hr = getHours(value);\n\tconst mn = getMinutes(value);\n\tif (isNaN(hr) || isNaN(mn)) {\n\t\treturn false;\n\t}\n\tif (!/[ap]m/i.test(value)) {\n\t\treturn false;\n\t}\n\tif (hr < 0 || hr > 12) {\n\t\treturn false;\n\t}\n\tif (mn < 0 || mn > 59) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction isDateTimeValid (value) {\n\t// 04/10/2018 19:11 am\n\tif (value.length !== 19) {\n\t\treturn false;\n\t}\n\tif (charCount(value, ' ') !== 2) {\n\t\treturn false;\n\t}\n\tif (charCount(value, ':') !== 1) {\n\t\treturn false;\n\t}\n\tif (charCount(value, '/') !== 2) {\n\t\treturn false;\n\t}\n\tconst date = value.substring(0, 10);\n\tconst time = value.substring(11);\n\treturn dates.is(date).valid() && isTimeValid(time);\n}\n\nfunction isDateValid(value) {\n    return dates.isValid(value);\n}\n\nfunction charCount (str, char) {\n\tstr = str.trim();\n\tlet count = 0;\n\tfor (let i = 0; i < str.length; i++) {\n\t\tif (str.charAt(i) === char) {\n\t\t\tcount++;\n\t\t}\n\t}\n\treturn count;\n}\n\nfunction timeIsInRange (time, min, max, date) {\n\tif (!min && !max) {\n\t\treturn true;\n\t}\n\n\tif (date) {\n\t\t// first check date range, before time range\n\t\t// console.log('date.range', date, '/', min, '/', max);\n\t\treturn true;\n\t}\n\n\n\t// console.log('time.range', time, '/', min, '/', max);\n\tconst d = toDateTime(time);\n\t// isGreater: 1st > 2nd\n\tif (min && !dates.is(d).greater(toDateTime(min))) {\n\t\treturn false;\n\t}\n\tif (max && !dates.is(d).less(toDateTime(max))) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\nfunction addTimeToDate (time, date) {\n\tif (!isTimeValid(time)) {\n\t\t//console.warn('time is not valid', time);\n\t\treturn date;\n\t}\n\tlet hr = getHours(time);\n\tconst mn = getMinutes(time);\n\tif (/pm/i.test(time) && hr !== 12) {\n\t\thr += 12;\n\t}\n\tdate.setHours(hr);\n\tdate.setMinutes(mn);\n\treturn date;\n}\n\nfunction nextNumPos (beg, s) {\n\tlet char, i, found = false;\n\tfor (i = 0; i < s.length; i++) {\n\t\tif (i < beg) {\n\t\t\tcontinue;\n\t\t}\n\t\tchar = s.charAt(i);\n\t\tif (!isNaN(parseInt(char))) {\n\t\t\tchar = parseInt(char);\n\t\t}\n\t\tif (typeof char === 'number') {\n\t\t\tfound = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn found ? i : -1;\n}\n\nconst numReg = /[0-9]/;\n\nfunction isNum (k) {\n\treturn numReg.test(k);\n}\n\nconst control = {\n\t'Shift': 1,\n\t'Enter': 1,\n\t// 'Backspace': 1,\n\t'Delete': 1,\n\t'ArrowLeft': 1,\n\t'ArrowRight': 1,\n\t'Escape': 1,\n\t'Command': 1,\n\t'Tab': 1,\n\t'Meta': 1,\n\t'Alt': 1\n};\n\nconst isArrowKey = {\n\t'ArrowUp': 1,\n\t'ArrowDown': 1\n};\n\nfunction isControl (e) {\n\treturn control[e.key];\n}\n\nfunction timeToSeconds (value) {\n\tconst isAM = /am/i.test(value);\n\tlet hr = getHours(value);\n\tif (isAM && hr === 12) {\n\t\thr = 0;\n\t} else if (!isAM && hr !== 12) {\n\t\thr += 12;\n\t}\n\tlet mn = getMinutes(value);\n\tconst sc = getSeconds(value);\n\tif (isNaN(hr) || isNaN(mn)) {\n\t\tthrow new Error('Invalid time ' + time);\n\t}\n\tmn *= 60;\n\thr *= 3600;\n\treturn hr + mn + sc;\n}\n\nfunction getHours (value) {\n\treturn parseInt(value.substring(0, 2));\n}\n\nfunction getMinutes (value) {\n\treturn parseInt(value.substring(3, 5));\n}\n\nfunction getSeconds (value) {\n\tif (value.split(':').length === 3) {\n\t\treturn parseInt(value.substring(6, 8));\n\t}\n\treturn 0;\n}\n\nfunction stripDate (str) {\n\treturn str.replace(/\\d+[\\/-]\\d+[\\/-]\\d+\\s*/, '');\n}\n\nfunction stopEvent (e) {\n\tif (e.metaKey || control[e.key]) {\n\t\treturn;\n\t}\n\te.preventDefault();\n\te.stopImmediatePropagation();\n\treturn false;\n}\n\nfunction removeCharAtPos (str, pos) {\n\treturn str.substring(0, pos) + str.substring(pos + 1);\n}\n\nfunction replaceText (str, chars, beg, end, xChars) {\n\tchars = chars.padEnd(end - beg, xChars);\n\treturn str.substring(0, beg) + chars + str.substring(end);\n}\n\nfunction formatDate (s, mask) {\n\tfunction sub (pos) {\n\t\tlet subStr = '';\n\t\tfor (let i = pos; i < mask.length; i++) {\n\t\t\tif (mask[i] === 'X') {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tsubStr += mask[i];\n\t\t}\n\t\treturn subStr;\n\t}\n\n\ts = s.replace(/(?!X)\\D/g, '');\n\tconst maskLength = mask.match(/X/g).join('').length;\n\tlet f = '';\n\tconst len = Math.min(s.length, maskLength);\n\tfor (let i = 0; i < len; i++) {\n\t\tif (mask[f.length] !== 'X') {\n\t\t\tf += sub(f.length);\n\t\t}\n\t\tf += s[i];\n\t}\n\treturn f;\n}\n\nfunction formatTime (s) {\n\ts = s.replace(/(?!X)\\D/g, '');\n\ts = s.substring(0, 4);\n\tif (s.length < 4) {\n\t\ts = `0${s}`;\n\t}\n\tif (s.length >= 2) {\n\t\ts = s.split('');\n\t\ts.splice(2, 0, ':');\n\t\ts = s.join('');\n\t}\n\treturn s;\n}\n\nfunction getAMPM (value) {\n\tconst result = /[ap]m/.exec(value);\n\treturn result ? result[0] : null;\n}\n\nfunction getMinDate (value) {\n\tif (value === 'now') {\n\t\tvalue = new Date();\n\t} else {\n\t\tvalue = dates.toDate(value);\n\t}\n\tvalue.setMinutes(value.getMinutes() - 2);\n\treturn value;\n}\n\nfunction getMaxDate (value) {\n\tif (value === 'now') {\n\t\tvalue = new Date();\n\t} else {\n\t\tvalue = dates.toDate(value);\n\t}\n\tvalue.setMinutes(value.getMinutes() + 2);\n\treturn value;\n}\n\nfunction getMinTime (value) {\n\tif (value === 'now') {\n\t\tvalue = new Date();\n\t} else {\n\t\tvalue = dates.toDate(value);\n\t}\n\tvalue.setSeconds(value.getSeconds() - 2);\n\treturn value;\n}\n\nfunction getMaxTime (value) {\n\tif (value === 'now') {\n\t\tvalue = new Date();\n\t} else {\n\t\tvalue = dates.toDate(value);\n\t}\n\tvalue.setSeconds(value.getSeconds() + 2);\n\treturn value;\n}\n\nfunction mergeTime (date, datetime) {\n\treturn `${date.trim()} ${datetime.substring(11)}`;\n}\n\nfunction toDateAriaLabel(date) {\n    date = dates.toDate(date);\n    return dates.format(date, 'd, E MMMM yyyy');\n}\n\nfunction toDateTimeAriaLabel(date) {\n    date = dates.toDate(date);\n    return dates.format(date, 'd, E MMMM yyyy');\n}\n\nfunction is (value) {\n\treturn {\n\t\tless (time) {\n\t\t\treturn timeToSeconds(value) < timeToSeconds(time);\n\t\t},\n\t\tgreater (time) {\n\t\t\treturn timeToSeconds(value) > timeToSeconds(time);\n\t\t},\n\t\tdateAndTime () {\n\t\t\treturn dates.is(value).date() && dates.is(value).time();\n\t\t},\n\t\ttime () {\n\t\t\treturn dates.is(value).time();\n\t\t},\n\t\tdate () {\n\t\t\treturn dates.is(value).date();\n\t\t},\n\t\ttype () {\n\t\t\tif (this.dateAndTime()) {\n\t\t\t\treturn 'datetime';\n\t\t\t}\n\t\t\tif (this.time()) {\n\t\t\t\treturn 'time';\n\t\t\t}\n\t\t\tif (this.date()) {\n\t\t\t\treturn 'date';\n\t\t\t}\n\t\t\treturn '';\n\t\t}\n\t}\n}\n\nconst util = {\n\tis,\n\taddTimeToDate,\n\tisTimeValid,\n    isDateTimeValid,\n    isDateValid,\n\tincMinutes,\n\tincHours,\n\tincMonth,\n\tincDate,\n\tincYear,\n\tround,\n\tpad,\n\tisNum,\n\tcontrol,\n\tisArrowKey,\n\tisControl,\n\tstopEvent,\n\tnextNumPos,\n\tremoveCharAtPos,\n\treplaceText,\n\tformatDate,\n\tformatTime,\n\tgetAMPM,\n\tgetMinDate,\n\tgetMaxDate,\n    toDateAriaLabel,\n    toDateTimeAriaLabel,\n\tgetMinTime,\n\tgetMaxTime,\n\ttimeIsInRange,\n\ttoDateTime,\n\ttimeToSeconds,\n\tstripDate,\n\tcharCount,\n\tmergeTime\n};\n\nwindow.getDatePickerUtil = () => {\n    return util;\n}\nmodule.exports = util;","const dom = require('@clubajax/dom');\n\nconst EVENT_NAME = 'change';\nmodule.exports = function (instance, value) {\n    if (instance.blockEvent) {\n        return;\n    }\n    value = value === undefined ? instance.value : value;\n    value = typeof value === 'object' ? value : {value};\n    if (value) {\n        value.value = dom.normalize(value.value);\n    }\n    const eventName = instance['event-name'] || EVENT_NAME;\n    const emitType = eventName === EVENT_NAME ? 'emit' : 'fire';\n    instance[emitType](eventName, value, true);\n    instance.__value = value !== null ? value.value : null;\n};\n","const uidMap = {};\nfunction uid (prefix = 'uid') {\n\tuidMap[prefix] = uidMap[prefix] || 0;\n\tuidMap[prefix]++;\n\treturn `${prefix}-${uidMap[prefix]}`;\n}\n\nmodule.exports = uid;","module.exports = __WEBPACK_EXTERNAL_MODULE__8__;","const BaseComponent = require('@clubajax/base-component');\nconst dom = require('@clubajax/dom');\nconst on = require('@clubajax/on');\nconst keys = require('@clubajax/key-nav');\nconst emitEvent = require('./lib/emitEvent');\n\nconst ATTR = {\n    LABEL: 'aria-label',\n    ALIAS: 'alias',\n    DISPLAY: 'display',\n    SELECTED: 'aria-selected',\n    DISABLED: 'disabled',\n    TABINDEX: 'tabindex',\n    VALUE: 'value',\n};\n\n// TODO!!!!\n// a11y\n\n\nclass UIList extends BaseComponent {\n    constructor() {\n        super();\n        this.sortdesc;\n        this.sortasc;\n        this.multiple;\n        this.readonly;\n        this.buttonid;\n        this.label;\n        this.lastValue = null;\n    }\n    attributeChanged(prop, value) {\n        if (prop === 'value') {\n            this.value = value;\n        }\n    }\n\n    set value(value) {\n        this.lastValue = value;\n        this.onDomReady(() => {\n            this.setControllerValue(value);\n        });\n        this.__value = value;\n    }\n\n    get value() {\n        if (!this.controller) {\n            return this.__value || this.getAttribute('value');\n        }\n        if (this.multiple) {\n            return this.controller\n                .getSelected()\n                .map(node => node.getAttribute('value'));\n        }\n        const node = this.controller.getSelected();\n        if (node) {\n            return node.getAttribute('value');\n        }\n        return this.__value || null;\n    }\n\n    set data(data) {\n        // if (noValues(data)) {\n        //     throw new Error('data does not contain any values');\n        // }\n        if (typeof data === 'function') {\n            this.lazyDataFN = data;\n            this.onConnected(() => {\n                this.render();\n                this.connect();\n            });\n            return;\n        }\n        this.setData(data);\n    }\n\n    get data() {\n        return this.items;\n    }\n\n    onDisabled() {\n        if (this.items || this.lazyDataFN) {\n            this.connectEvents();\n        }\n        this.onDomReady(() => {\n            this.setTabIndicies();\n        });\n    }\n\n    onReadonly() {\n        this.connectEvents();\n    }\n    \n    setLazyValue(value) {\n        // emits a value, in spite of the list not yet being rendered\n        const data = this.lazyDataFN();\n        const item = data.find(m => m.value === value);\n        if (!item) {\n            return;\n        }\n        this.emitEvent();\n    }\n\n    setLazyData() {\n        // to be called externally, for example, by a dropdown\n        this.setData(this.lazyDataFN());\n        this.lazyDataFN = null;\n        // I think this should be next:\n        this.connectEvents();\n        this.fire('dom-update');\n    }\n\n    setData(data) {\n        if (isEqual(this.orgData, data)) {\n            return;\n        }\n        data = toArray(data);\n        if (data.length && typeof data[0] !== 'object') {\n            data = data.map(item => ({ label: item, data: item }));\n        }\n        if (!this.lazyDataFN) {\n            this.__value = undefined;\n        }\n        this.selectedNode = null;\n        this.orgData = data;\n        this.items = sort([...data], this.sortdesc, this.sortasc);\n        this.update();\n        this.onConnected(() => {\n            this.setItemsFromData();\n        });\n    }\n\n    addData(data) {\n        data = toArray(data);\n        this.items = [...(this.items || []), ...data];\n        this.setItemsFromData();\n    }\n\n    removeData(values) {\n        values = toArray(values);\n        values.forEach(value => {\n            const index = this.items.findIndex(item => item.value === value);\n            if (index === -1) {\n                console.warn('remove value, not found', value);\n            }\n            this.items.splice(index, 1);\n        });\n        this.setItemsFromData();\n    }\n\n    setItemsFromData() {\n        // uses an array of objects as the list items\n        this.render();\n        this.list.innerHTML = '';\n        if (this.lazyDataFN && !this.items) {\n            this.items = [];\n        }\n        if (dom.isNode(this.items[0])) {\n            this.setDomData();\n            return;\n        }\n        const parentValue = this.value;\n        const list = this.list;\n        let node;\n        this.items.forEach(function (item) {\n            if (item.type === 'divider') {\n                dom('li', {class: 'divider'}, list);\n                return;\n            }\n            if (item.type === 'label') {\n                dom('li', {class: 'label', html: item.label}, list);\n                return;\n            }\n            const label = item.alias\n                ? `${item.alias}: ${item.label}`\n                : item.label;\n            // if (item.value === undefined && label === undefined) {\n            //     throw new Error(\n            //         '[ERROR] each items must have a value or a label'\n            //     );\n            // }\n            if (item.value === undefined) {\n                node = dom('div', { class: 'label', html: label }, list);\n                node.unselectable = true;\n                return;\n            }\n            const options = { html: label, value: item.value };\n            const isSelected = item.selected || item.value === parentValue;\n            if (isSelected) {\n                options['aria-selected'] = true;\n            }\n            if (item.class) {\n                options.class = item.class;\n            }\n            if (item.disabled) {\n                options.disabled = true;\n            }\n            node = dom('li', options, list);\n        });\n        this.appendChild(this.list);\n        this.update();\n        this.connect();\n    }\n\n    initDomData() {\n        // used only for the children of ui-list as the items\n        let postValue;\n        const parentValue = this.value;\n        this.render();\n        this.items = [];\n        while (this.children.length) {\n            const child = this.children[0];\n            if (child.localName !== 'li') {\n                console.warn(\"ui-list children should use LI's\");\n            }\n            this.items.push({\n                label: child.textContent,\n                value: child.getAttribute(ATTR.VALUE),\n            });\n            if (\n                child.hasAttribute(ATTR.SELECTED) ||\n                child.getAttribute(ATTR.VALUE) === parentValue\n            ) {\n                this.selectedNode = child;\n                this.orgSelected = child;\n                this.items[this.items.length - 1].selected = true;\n                if (!parentValue) {\n                    postValue = child.getAttribute(ATTR.VALUE);\n                }\n            }\n            this.list.appendChild(child);\n        }\n\n        this.update();\n        this.appendChild(this.list);\n        this.connect();\n\n        this.disabled = this.hasAttribute(ATTR.DISABLED);\n\n        if (postValue || parentValue) {\n            this.select(postValue || parentValue);\n        }\n    }\n\n    setDomData() {\n        // uses array of dom nodes, or document fragment\n        // TODO: Do nodes need to be cloned?\n        const list = this.list;\n        if (this.items[0] && this.items[0].nodeType === 11) {\n            // document fragment\n            list.appendChild(this.items[0]);\n        } else {\n            this.items.forEach(node => {\n                if (node.localName !== 'li') {\n                    throw new Error('list children should be of type \"li\"');\n                }\n                if (!node.getAttribute('value')) {\n                    node.setAttribute('value', valueify(node.textContent));\n                }\n                list.appendChild(node);\n            });\n        }\n        this.appendChild(list);\n        this.setItemsFromDom();\n        this.update();\n        this.connect();\n    }\n\n    setItemsFromDom() {\n        // derives items list from dom \n        this.items = [];\n        [...this.list.children].forEach(child => {\n            if (child.localName !== 'li') {\n                console.warn(\"ui-list children should use LI's\");\n            }\n            this.items.push({\n                label: child.getAttribute(ATTR.LABEL) || child.textContent,\n                value: child.getAttribute(ATTR.VALUE),\n                alias: child.getAttribute(ATTR.ALIAS),\n                display: child.getAttribute(ATTR.DISPLAY),\n            });\n        });\n    }\n\n    setControllerValue(value) {\n        if (this.controller) {\n            if (Array.isArray(value)) {\n                if (!this.multiple) {\n                    throw new Error(\n                        'Trying to set multiple values without the `multiple` attribute'\n                    );\n                }\n                const selector = value.map(getSelector).join(',');\n                this.controller.setSelected(dom.queryAll(this, selector));\n            } else {\n                this.controller.setSelected(\n                    dom.query(this, getSelector(value))\n                );\n            }\n        } else {\n            console.warn('UIList.setControllerValue: No controller');\n        }\n    }\n\n    getItem(value) {\n        return this.items\n            ? this.items.find(item => item.value === value || `${item.value}` === `${value}`)\n            : null;\n    }\n\n    connected() {\n        if (this.lazyDataFN) {\n            this.update();\n        }\n        if (this.items) {\n            this.initDomData = () => {};\n            // this.setItemsFromData();\n        }\n    }\n\n    domReady() {\n        if (!this.disabled && !this.readonly) {\n            this.onDisabled();\n        }\n        if (this.items || this.lazyDataFN) {\n            return;\n        }\n        this.initDomData();\n    }\n\n    emitEvent() {\n        // emits a \"change\" event\n        emitEvent(this, this.value);\n    }\n\n    update() {\n        // override me\n        // called after items insertion, before list insertion\n    }\n\n    setTabIndicies() {\n        if (!this.list) {\n            return;\n        }\n        if (!this.disabled) {\n            this.setAttribute(ATTR.TABINDEX, '-1');\n            this.list.setAttribute(ATTR.TABINDEX, '0');\n        } else {\n            this.removeAttribute(ATTR.TABINDEX);\n            this.list.removeAttribute(ATTR.TABINDEX);\n        }\n    }\n\n    connect() {\n        // called after data is set\n        this.connectController();\n        this.connectEvents();\n        this.connect = function() {};\n    }\n\n    connectController() {\n        const options = {\n            canSelectNone: this.getAttribute('can-select-none'),\n            multiple: this.multiple,\n            searchTime: this.getAttribute('search-time'),\n            externalSearch: this['external-search'],\n            buttonId: this.buttonid,\n            value: this.value\n        };\n        this.connectHandles = on.makeMultiHandle([\n            this.on('click', () => {\n                this.list.focus();\n            }),\n            this.on('focus', () => {\n                this.list.focus();\n            }),\n            this.on('key-select', () => {\n                this.lastValue = this.value;\n                this.emitEvent();\n            }),\n        ]);\n\n        this.controller = keys(this.list, options);\n    }\n\n    connectEvents() {\n        if (this.lazyDataFN) {\n            return;\n        }\n        const enabled = !this.readonly && !this.disabled;\n        this.setTabIndicies();\n        if (!enabled && !this.controller) {\n            return;\n        }\n        if (!enabled && this.controller) {\n            this.controller.pause();\n            this.connectHandles.pause();\n        } else if (enabled && this.controller) {\n            this.controller.resume();\n            this.connectHandles.resume();\n        }\n    }\n\n    reset() {\n        this.value = this.__value;\n    }\n\n    render() {\n        if (!this.labelNode && this.label) {\n            // TODO: a11y?\n            this.labelNode = dom('label', { html: this.label }, this);\n        }\n        if (!this.list) {\n            this.list = dom('ul', {});\n        }\n    }\n\n    destroy() {\n        super.destroy();\n    }\n}\n\nfunction toArray(data) {\n    return Array.isArray(data) ? data : [data];\n}\n\nfunction getSelector(val) {\n    return `[value=\"${val}\"]`;\n}\n\nfunction valueify(text) {\n    return text.replace(/\\s/g, '-').toLowerCase();\n}\n\nfunction sort(items, desc, asc) {\n    if (desc) {\n        items.sort((a, b) => a[desc] > b[desc] ? 1 : -1);\n    }\n    if (asc) {\n        items.sort((a, b) => a[asc] < b[asc] ? 1 : -1);\n    }\n    return items;\n}\n\nfunction isEqual(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!a || !b || !Array.isArray(a) || !Array.isArray(b)) {\n        return false;\n    }\n    return a.map(m => m.value).join(',') === b.map(m => m.value).join(',')\n}\n\nfunction noValues(data) {\n    // no data is okay\n    if (!data.length) {\n        return false;\n    }\n    if (dom.isNode(data[0])) {\n        return false;\n    }\n    // custom app expects IDs\n    return !data.find(d => !!d.value || !!d.id); \n}\n\nmodule.exports = BaseComponent.define('ui-list', UIList, {\n    props: [\n        'label',\n        'limit',\n        'name',\n        'event-name',\n        'align',\n        'buttonid',\n        'external-search',\n        'sortdesc',\n        'sortasc'\n    ],\n    bools: ['disabled', 'readonly', 'multiple'],\n    attrs: ['value'],\n});\n","const util = require('./util');\nconst dates = require('@clubajax/dates');\n\nfunction isValid (value = this.input.value, type) {\n\tif (!value && this.required) {\n\t\tthis.emitError('This field is required');\n\t\treturn false;\n\t} else if (!value) {\n\t\treturn true;\n\t}\n\n\tif (value.length > 19) {\n\t\temitError.call(this, 'Not a valid date and time');\n\t\treturn false;\n\t}\n\tif (type !== 'time' && type !== 'date' && type !== 'datetime') {\n\t\t// incomplete string\n\t\temitError.call(this, 'Not a valid date and time');\n\t\treturn false;\n\t}\n\n\tif (type === 'time' && !util.isTimeValid(value)) {\n\t\temitError.call(this, 'Not a valid time');\n\t\treturn false;\n    }\n    \n    if (type === 'date' && !util.isDateValid(value)) {\n        emitError.call(this, 'Not a valid date');\n        return false;\n    }\n\n\tif (type === 'datetime' && !util.isDateTimeValid(value)) {\n\t\temitError.call(this, 'Not a valid date and time');\n\t\treturn false;\n\t}\n\tlet msg;\n\tconst strValue = value;\n\tvalue = dates.toDate(value);\n\n\tif (this.minDate) {\n\t\tif (dates.is(value).less(this.minDate)) {\n\t\t\temitError.call(this, getMinMsg(this.min));\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tif (this.maxDate) {\n\t\tif (dates.is(value).greater(this.maxDate)) {\n\t\t\temitError.call(this, getMaxMsg(this.max));\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// if (type === 'datetime' && this.minDate && dates.is(value).equalDate(this.minDate)) {\n\t// \tconsole.log('CHECK TIME', value, this.minDate);\n\t// }\n\n\tif (/time/.test(type) && !util.isTimeValid(strValue)) {\n\t\treturn false;\n\t}\n\n\temitError.call(this, null);\n\n\treturn true;\n}\n\n\nfunction getMinMsg (min) {\n\treturn min === 'now' ? 'Value must be in the future' : `Value is less than the minimum, ${min}`\n}\n\nfunction getMaxMsg (max) {\n\treturn max === 'now' ? 'Value must be in the past' : `Value is greater than the maximum, ${max}`\n}\n\nfunction emitError (msg) {\n\tif (msg === this.validationError) {\n\t\treturn;\n\t}\n    this.validationError = msg;\n\tthis.fire('validation', { message: msg }, true);\n}\n\nmodule.exports = isValid;\n","const BaseComponent = require('@clubajax/base-component');\nconst dom = require('@clubajax/dom');\nconst emitEvent = require('./lib/emitEvent');\nrequire('./ui-icon');\n\nconst DEFAULT_PLACEHOLDER = 'Enter text...';\n\nclass UiInput extends BaseComponent {\n    constructor() {\n        super();\n        this.readonly;\n        this.disabled;\n        this.placeholder;\n        this.icon;\n        this.label;\n    }\n    attributeChanged(prop, value) {\n        if (prop === 'value') {\n            this.value = value;\n        }\n    }\n\n    set value(value) {\n        this._value = value === undefined || value === null ? '' : value;\n        this.setValue(this._value);\n    }\n\n    get value() {\n        return this.input.value || null;\n    }\n\n    setValue(value) {\n        if (this.input) {\n            this.input.value = value;\n            this.setPlaceholder();\n        }\n    }\n\n    onIcon(type) {\n        this.iconNode.type = type;\n    }\n    \n    onLabel() {\n        this.labelNode.innerHTML = this.label;\n    }\n\n    onDisabled(value) {\n        if (this.input) {\n            this.input.disabled = value;\n        }\n    }\n\n    onReadonly(value) {\n        if (this.input) {\n            this.input.readonly = value;\n        }\n    }\n\n    setPlaceholder() {\n        // dom.classList.toggle(this, 'has-placeholder')\n    }\n\n    emitEvent(e) {\n        e.stopPropagation();\n        this._value = this.input.value;\n        emitEvent(this, this._value);\n    }\n\n    connected() {\n        this.render();\n        this.connected = () => {};\n    }\n\n    connect() {\n        this.on(this.input, 'blur', () => {\n            this.focused = false;\n            this.emit('blur');\n        });\n        this.on(this.input, 'focus', () => {\n            this.focused = true;\n            this.emit('focus');\n        });\n        this.on(this.input, 'change', this.emitEvent.bind(this));\n    }\n    \n    render() {\n        this.labelNode = dom('label', {}, this);\n        this.input = dom('input', {\n            value: this._value || '',\n            readonly: this.readonly,\n            disabled: this.disabled,\n            placeholder: this.placeholder || DEFAULT_PLACEHOLDER\n        }, this);\n        if (this.icon) {\n            this.iconNode = dom('ui-icon', {type: this.icon}, this);\n            this.classList.add('has-icon');\n        }\n        this.setPlaceholder();\n        this.connect();\n    }\n}\n\nfunction isNull(value) {\n    return value === null || value === undefined;\n}\n\nmodule.exports = BaseComponent.define('ui-input', UiInput, {\n    props: ['placeholder', 'label', 'limit', 'name', 'event-name', 'align', 'icon'],\n    bools: ['disabled', 'ready', 'required', 'autofocus'],\n    attrs: ['value']\n});\n","const BaseComponent = require('@clubajax/base-component');\nconst dates = require('@clubajax/dates');\nconst dom = require('@clubajax/dom');\nconst util = require('./util');\nconst isValid = require('./isValid');\nrequire('./time-input');\n\n// ref:\n// https://axesslab.com/accessible-datepickers/\n// http://whatsock.com/tsg/Coding%20Arena/ARIA%20Date%20Pickers/ARIA%20Date%20Picker%20(Basic)/demo.htm\n\nconst EVENT_NAME = 'change';\n\nclass DatePicker extends BaseComponent {\n    constructor() {\n        super();\n        this.dateType = 'date';\n        this.current = new Date();\n        this.previous = {};\n\n        this.container;\n        this.time;\n        this.monthNode;\n        this.footerLink;\n        this.calFooter;\n        this.lftMoNode;\n        this.rgtMoNode;\n        this.lftYrNode;\n        this.rgtYrNode;\n    }\n\n    get templateString() {\n        return `\n<div class=\"calendar\" ref=\"calNode\">\n<div class=\"cal-header\" ref=\"headerNode\">\n\t<button class=\"cal-yr-lft\" ref=\"lftYrNode\" tabindex=\"0\" aria-label=\"Previous Year\"></button>\n\t<button class=\"cal-lft\" ref=\"lftMoNode\" tabindex=\"0\" aria-label=\"Previous Month\"></button>\n\t<label class=\"cal-month\" ref=\"monthNode\"></label>\t\n\t<button class=\"cal-rgt\" ref=\"rgtMoNode\" tabindex=\"0\"  aria-label=\"Next Month\"></button>\n\t<button class=\"cal-yr-rgt\" ref=\"rgtYrNode\" tabindex=\"0\" aria-label=\"Next Year\"></button>\n</div>\n<div class=\"cal-container\" ref=\"container\"></div>\n<div class=\"cal-footer\" ref=\"calFooter\">\n\t<button ref=\"footerLink\" class=\"today-button\" aria-label=\"Set Date to Today\"></button>\n</div>\n</div>\n<input class=\"focus-loop\" aria-hidden=\"true\"/>\n`;\n    }\n\n    set value(value) {\n        this.setValue(dates.isDate(value) ? dates.toDate(value) : today);\n    }\n\n    get value() {\n        if (!this.valueDate) {\n            const value = this.getAttribute('value') || today;\n            this.valueDate = dates.toDate(value);\n        }\n        return this.valueDate;\n    }\n\n    onMin(value) {\n        console.log('PICK MIN', value);\n        this.onDomReady(() => {\n            this.minDate = util.getMinDate(value);\n            // this caused the wrong date to be disabled - why did I do this?\n            // this.minDate.setDate(this.minDate.getDate() - 1);\n            if (this.timeInput) {\n                this.timeInput.min = value;\n            }\n            this.render();\n        });\n        \n    }\n\n    onMax(value) {\n        this.onDomReady(() => {\n            this.maxDate = util.getMaxDate(value);\n            if (this.timeInput) {\n                this.timeInput.max = value;\n            }\n            this.render();\n        });\n    }\n\n    setDisplay(...args) {\n        // used by date-range-picker\n        if (args.length === 2) {\n            this.current.setFullYear(args[0]);\n            this.current.setMonth(args[1]);\n        } else if (typeof args[0] === 'object') {\n            this.current.setFullYear(args[0].getFullYear());\n            this.current.setMonth(args[0].getMonth());\n        } else if (args[0] > 12) {\n            this.current.setFullYear(args[0]);\n        } else {\n            this.current.setMonth(args[0]);\n        }\n        this.valueDate = dates.copy(this.current);\n        this.noEvents = true;\n        this.render();\n    }\n\n    getFormattedValue() {\n        let str = this.valueDate === today ? '' : !!this.valueDate ? dates.format(this.valueDate) : '';\n        if (this.time) {\n            str += ` ${this.timeInput.value}`;\n        }\n        return str;\n    }\n\n    setAriaLabel() {\n        const ariaLabel = this.valueDate ?\n            this.timeInput ?\n                util.toDateTimeAriaLabel(this.valueDate) :\n                util.toDateAriaLabel(this.valueDate) :\n            'not set';\n        this.setAttribute('aria-label', `Date Picker, current date: ${ariaLabel}`);\n    }\n\n    setAriaMonthYearAlert(enabled) {\n        if (enabled) {\n            this.monthNode.setAttribute('role', 'alert');\n        } else {\n            this.monthNode.removeAttribute('role', 'alert');\n        }\n    }\n\n    emitEvent(silent) {\n        const date = this.valueDate;\n        if (this.time) {\n            if (!this.timeInput.valid) {\n                this.timeInput.validate();\n                return;\n            }\n            util.addTimeToDate(this.timeInput.value, date);\n        }\n        const event = {\n            value: this.getFormattedValue(),\n            silent,\n            date\n        };\n        if (this['range-picker']) {\n            event.first = this.firstRange;\n            event.second = this.secondRange;\n        }\n        this[this.emitType](this.eventName, event, true);\n\n        this.setAriaLabel();\n    }\n\n    emitDisplayEvents() {\n        const month = this.current.getMonth(),\n            year = this.current.getFullYear();\n\n        if (!this.noEvents && (month !== this.previous.month || year !== this.previous.year)) {\n            this.fire('display-change', {month: month, year: year});\n        }\n\n        this.noEvents = false;\n        this.previous = {\n            month: month,\n            year: year\n        };\n    }\n\n    onHide() {\n        // not an attribute; called by owner\n    }\n\n    onShow() {\n        this.current = dates.copy(this.valueDate);\n        this.render();\n        setTimeout(this.focus.bind(this), 100);\n    }\n\n    setValue(valueObject) {\n        this.hasTime = !!this.timeInput;\n        const strDate = dates.format(valueObject, this.timeInput ? 'MM/dd/yyyy h:m a' : 'MM/dd/yyyy');\n        if (isValid.call(this, strDate, this.dateType)) {\n            this.valueDate = valueObject;\n            this.current = dates.copy(this.valueDate);\n            this.onDomReady(() => {\n                this.render();\n                this.setAriaLabel();\n            });\n        }\n    }\n\n    onClickDay(node, silent) {\n        const\n            day = +node.textContent,\n            isFuture = node.classList.contains('future'),\n            isPast = node.classList.contains('past'),\n            isDisabled = node.classList.contains('disabled');\n\n        if (isDisabled) {\n            if (this.focusNode) {\n                this.focusNode.focus();\n            }\n            return;\n        }\n\n        this.current.setDate(day);\n        if (isFuture) {\n            this.current.setMonth(this.current.getMonth() + 1);\n        }\n        if (isPast) {\n            this.current.setMonth(this.current.getMonth() - 1);\n        }\n\n        this.valueDate = dates.copy(this.current);\n\n        if (this.timeInput) {\n            this.timeInput.setDate(this.valueDate);\n        }\n\n        this.emitEvent(silent);\n\n        if (this['range-picker']) {\n            this.clickSelectRange();\n        }\n\n        if (isFuture || isPast) {\n            this.render();\n        } else {\n            this.selectDay();\n        }\n    }\n\n    selectDay() {\n        if (this['range-picker']) {\n            return;\n        }\n        const now = this.querySelector('.selected');\n        const node = this.dayMap[this.current.getDate()];\n        if (now) {\n            now.classList.remove('selected');\n        }\n        node.classList.add('selected');\n    }\n\n    focusDay() {\n        const node = this.container.querySelector('div.highlighted[tabindex=\"0\"]') ||\n            this.container.querySelector('div.selected[tabindex=\"0\"]');\n        if (node) {\n            node.focus();\n        }\n    }\n\n    highlightDay(date) {\n        let node;\n        if (this.isValidDate(date)) {\n            node = this.container.querySelector('div[tabindex=\"0\"]');\n            if (node) {\n                node.setAttribute('tabindex', '-1');\n            }\n\n            const shouldRerender = date.getMonth() !== this.current || date.getFullYear() !== this.current.getFullYear();\n\n            this.current = date;\n            if (shouldRerender) {\n                this.render();\n            } else {\n                const dateSelector = util.toAriaLabel(this.current);\n                node = this.container.querySelector(`div[aria-label=\"${dateSelector}\"]`);\n                node.setAttribute('tabindex', '0');\n            }\n            this.focusDay();\n        }\n    }\n\n    isValidDate(date) {\n        // used by arrow keys\n        date = dates.zeroTime(date);\n        if (this.minDate) {\n            if (dates.is(date).less(this.minDate)) {\n                return false;\n            }\n        }\n        if (this.maxDate) {\n            if (dates.is(date).greater(this.maxDate)) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    onClickMonth(direction) {\n        this.current.setMonth(this.current.getMonth() + direction);\n        this.render();\n    }\n\n    onClickYear(direction) {\n        this.current.setFullYear(this.current.getFullYear() + direction);\n        this.render();\n    }\n\n    clearRange() {\n        this.hoverDate = 0;\n        this.setRange(null, null);\n    }\n\n    setRange(firstRange, secondRange) {\n        this.firstRange = firstRange;\n        this.secondRange = secondRange;\n        this.displayRange();\n        this.setRangeEndPoints();\n    }\n\n    clickSelectRange() {\n        const\n            prevFirst = !!this.firstRange,\n            prevSecond = !!this.secondRange,\n            rangeDate = dates.copy(this.current);\n\n        if (this.isOwned) {\n            this.fire('select-range', {\n                first: this.firstRange,\n                second: this.secondRange,\n                current: rangeDate\n            });\n            return;\n        }\n        if (this.secondRange) {\n            this.fire('reset-range');\n            this.firstRange = null;\n            this.secondRange = null;\n        }\n        if (this.firstRange && this.isValidRange(rangeDate)) {\n            this.secondRange = rangeDate;\n            this.hoverDate = 0;\n            this.setRange(this.firstRange, this.secondRange);\n        } else {\n            this.firstRange = null;\n        }\n        if (!this.firstRange) {\n            this.hoverDate = 0;\n            this.setRange(rangeDate, null);\n        }\n        this.fire('select-range', {\n            first: this.firstRange,\n            second: this.secondRange,\n            prevFirst: prevFirst,\n            prevSecond: prevSecond\n        });\n    }\n\n    hoverSelectRange(e) {\n        if (this.firstRange && !this.secondRange && e.target.classList.contains('on')) {\n            this.hoverDate = e.target._date;\n            this.displayRange();\n        }\n    }\n\n    displayRangeToEnd() {\n        if (this.firstRange) {\n            this.hoverDate = dates.copy(this.current);\n            this.hoverDate.setMonth(this.hoverDate.getMonth() + 1);\n            this.displayRange();\n        }\n    }\n\n    displayRange() {\n        let beg = this.firstRange;\n        let end = this.secondRange ? this.secondRange.getTime() : this.hoverDate;\n        const map = this.dayMap;\n        if (!beg || !end) {\n            Object.keys(map).forEach(function (key, i) {\n                map[key].classList.remove('range');\n            });\n        } else {\n            beg = beg.getTime();\n            Object.keys(map).forEach(function (key, i) {\n                if (inRange(map[key]._date, beg, end)) {\n                    map[key].classList.add('range');\n                } else {\n                    map[key].classList.remove('range');\n                }\n            });\n        }\n    }\n\n    hasRange() {\n        return !!this.firstRange && !!this.secondRange;\n    }\n\n    isValidRange(date) {\n        if (!this.firstRange) {\n            return true;\n        }\n        return date.getTime() > this.firstRange.getTime();\n    }\n\n    setRangeEndPoints() {\n        this.clearEndPoints();\n        if (this.firstRange) {\n            if (this.firstRange.getMonth() === this.current.getMonth()) {\n                this.dayMap[this.firstRange.getDate()].classList.add('range-first');\n            }\n            if (this.secondRange && this.secondRange.getMonth() === this.current.getMonth()) {\n                this.dayMap[this.secondRange.getDate()].classList.add('range-second');\n            }\n        }\n    }\n\n    clearEndPoints() {\n        const first = this.querySelector('.range-first'),\n            second = this.querySelector('.range-second');\n        if (first) {\n            first.classList.remove('range-first');\n        }\n        if (second) {\n            second.classList.remove('range-second');\n        }\n    }\n\n    domReady() {\n        this.eventName = this['event-name'] || EVENT_NAME;\n        this.emitType = this.eventName === EVENT_NAME ? 'emit' : 'fire';\n        this.setAttribute('tabindex', '0');\n\n        if (this['range-left']) {\n            this.classList.add('left-range');\n            this['range-picker'] = true;\n            this.isOwned = true;\n        }\n        if (this['range-right']) {\n            this.classList.add('right-range');\n            this['range-picker'] = true;\n            this.isOwned = true;\n        }\n        if (this.isOwned) {\n            this.classList.add('minimal');\n        }\n        this.current = dates.copy(this.value);\n        this.render();\n        this.connect();\n        this.setAriaLabel();\n    }\n\n    render() {\n\n        const focused = getFocusedDay();\n        // dateNum increments, starting with the first Sunday\n        // showing on the monthly calendar. This is usually the\n        // previous month, so dateNum will start as a negative number\n        destroy(this.bodyNode);\n\n        this.dayMap = {};\n\n        let\n            node = dom('div', {class: 'cal-body'}),\n            i, tx, isThisMonth, day, css, isSelected, isToday, hasSelected, defaultDateSelector, minmax, isHighlighted,\n            nextMonth = 0,\n            isRange = this['range-picker'],\n            d = this.current,\n            incDate = dates.copy(d),\n            daysInPrevMonth = dates.getDaysInPrevMonth(d),\n            daysInMonth = dates.getDaysInMonth(d),\n            dateNum = dates.getFirstSunday(d),\n            dateToday = getSelectedDate(today, d),\n            dateSelected = getSelectedDate(this.valueDate, d),\n            highlighted = d.getDate(),\n            dateObj = dates.add(new Date(d.getFullYear(), d.getMonth(), 1), dateNum);\n\n        this.monthNode.innerHTML = dates.getMonthName(d) + ' ' + d.getFullYear();\n\n        for (i = 0; i < 7; i++) {\n            dom(\"div\", {html: dates.days.abbr[i], class: 'day-of-week'}, node);\n        }\n\n        console.log(' - ', this.minDate);\n        for (i = 0; i < 42; i++) {\n\n            minmax = dates.isLess(dateObj, this.minDate) || dates.isGreater(dateObj, this.maxDate);\n\n            tx = dateNum + 1 > 0 && dateNum + 1 <= daysInMonth ? dateNum + 1 : \"&nbsp;\";\n\n            isThisMonth = false;\n            isSelected = false;\n            isHighlighted = false;\n            isToday = false;\n\n            if (dateNum + 1 > 0 && dateNum + 1 <= daysInMonth) {\n                // current month\n                tx = dateNum + 1;\n                isThisMonth = true;\n                css = 'day on';\n                if (dateToday === tx) {\n                    isToday = true;\n                    css += ' today';\n                }\n                if (dateSelected === tx && !isRange) {\n                    isSelected = true;\n                    hasSelected = true;\n                    css += ' selected';\n                } else if (tx === highlighted) {\n                    css += ' highlighted';\n                    isHighlighted = true;\n                }\n\n                // if (tx === defaultDate) {\n                // \tdefaultDateSelector = util.toAriaLabel(dateObj);\n                // }\n            } else if (dateNum < 0) {\n                // previous month\n                tx = daysInPrevMonth + dateNum + 1;\n                css = 'day off past';\n            } else {\n                // next month\n                tx = ++nextMonth;\n                css = 'day off future';\n            }\n\n            if (minmax) {\n                css = 'day disabled';\n                if (isSelected) {\n                    css += ' selected';\n                }\n                if (isToday) {\n                    css += ' today';\n                }\n            }\n\n            const ariaLabel = util.toDateAriaLabel(dateObj);\n            day = dom(\"div\", {\n                html: dom('span', {html: tx, 'data-no-clickoff': true}),\n                class: css,\n                'aria-label': ariaLabel,\n                tabindex: isSelected || isHighlighted ? 0 : -1\n            }, node);\n\n            dateNum++;\n            dateObj.setDate(dateObj.getDate() + 1);\n            if (isThisMonth) {\n                // Keep a map of all the days\n                // use it for adding and removing selection/hover classes\n                incDate.setDate(tx);\n                day._date = incDate.getTime();\n                this.dayMap[tx] = day;\n            }\n        }\n\n        this.container.appendChild(node);\n        this.bodyNode = node;\n        this.setFooter();\n        this.displayRange();\n        this.setRangeEndPoints();\n\n        this.emitDisplayEvents();\n\n        if (this.timeInput) {\n            this.timeInput.setDate(this.current);\n        }\n\n        if (focused) {\n            this.focusNode = dom.query(this.bodyNode, `[aria-label=\"${focused}\"]`);\n            if (this.focusNode) {\n                this.focusNode.focus();\n            }\n        }\n    }\n\n    setFooter() {\n        if (this.timeInput) {\n            if (this.current) {\n                this.timeInput.value = this.valueDate;\n            }\n            return;\n        }\n        if (this.time) {\n            this.timeInput = dom('time-input', {\n                label: 'Time:',\n                required: true,\n                value: this.value,\n                min: this.minDate,\n                max: this.maxDate,\n                'event-name': 'time-change'\n            }, this.calFooter);\n            this.timeInput.setDate(this.current);\n            this.timeInput.on('time-change', (e) => {\n                this.emitEvent(e.detail.silent);\n            });\n            destroy(this.footerLink);\n        } else {\n            const d = new Date();\n            this.footerLink.innerHTML = dates.format(d, 'E MMMM dd, yyyy');\n        }\n    }\n\n    connect() {\n        this.on(this.container, 'click', (e) => {\n            this.fire('pre-click', e, true);\n            const node = e.target.closest('.day');\n            if (node) {\n                this.onClickDay(node);\n            }\n        });\n\n        this.on(this.container, 'keydown', (e) => {\n            let num;\n            switch (e.key) {\n                case 'ArrowLeft':\n                    num = -1;\n                    break;\n                case 'ArrowRight':\n                    num = 1;\n                    break;\n                case 'ArrowUp':\n                    num = -7;\n                    break;\n                case 'ArrowDown':\n                    num = 7;\n                    break;\n                case 'Enter':\n                    this.onClickDay(e.target);\n                    break;\n                case ' ':\n                    this.onClickDay(e.target, true);\n                    this.focusDay();\n                    return util.stopEvent(e);\n            }\n\n            if (num) {\n                this.highlightDay(dates.add(this.current, num));\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                return false;\n            }\n        });\n\n        this.on(document, 'keydown', (e) => {\n            if (e.key === ' ' && isControl(e.target, this)) {\n                this.emit(e.target, 'click');\n                return util.stopEvent(e);\n            }\n        });\n\n        this.on(this.lftMoNode, 'click', () => {\n            this.onClickMonth(-1);\n        });\n\n        this.on(this.rgtMoNode, 'click', () => {\n            this.onClickMonth(1);\n        });\n\n        this.on(this.lftYrNode, 'click', () => {\n            this.onClickYear(-1);\n        });\n\n        this.on(this.rgtYrNode, 'click', () => {\n            this.onClickYear(1);\n        });\n\n        this.on(this.footerLink, 'click', () => {\n            this.setValue(new Date());\n            this.emitEvent();\n        });\n\n        [this.lftMoNode, this.rgtMoNode, this.lftYrNode, this.rgtYrNode].forEach((node) => {\n            this.on(node, 'blur', () => {\n                this.setAriaMonthYearAlert(false);\n            });\n            this.on(node, 'focus', () => {\n                setTimeout(() => {\n                    this.setAriaMonthYearAlert(true);\n                }, 30);\n            });\n        });\n\n        if (this['range-picker']) {\n            this.on(this.container, 'mouseover', this.hoverSelectRange.bind(this));\n        }\n    }\n}\n\nconst today = new Date();\n\nfunction isControl(node, picker) {\n    return node === picker.lftMoNode || node === picker.rgtMoNode || node === picker.lftYrNode || node === picker.rgtYrNode || node === picker.footerLink;\n}\n\nfunction getSelectedDate(date, current) {\n    if (date.getMonth() === current.getMonth() && date.getFullYear() === current.getFullYear()) {\n        return date.getDate();\n    }\n    return -999; // index must be out of range, and -1 is the last day of the previous month\n}\n\nfunction destroy(node) {\n    if (node) {\n        dom.destroy(node);\n    }\n}\n\nfunction inRange(dateTime, begTime, endTime) {\n    return dateTime >= begTime && dateTime <= endTime;\n}\n\nfunction getFocusedDay() {\n    const node = document.activeElement;\n    if (!node || !dom.classList.contains(node, 'day')) {\n        return null;\n    }\n    return node.getAttribute('aria-label');\n}\n\n// range-left/range-right mean that this is one side of a date-range-picker\nmodule.exports = BaseComponent.define('date-picker', DatePicker, {\n    bools: ['range-picker', 'range-left', 'range-right', 'time'],\n    props: ['min', 'max', 'event-name']\n});\n","const util = require('./util');\n\nfunction onKey (e, type) {\n\tlet str = this.typedValue || '';\n\tconst beg = e.target.selectionStart;\n\tconst end = e.target.selectionEnd;\n    const k = e.key;\n\n\tif (k === 'Enter') {\n\t\tconst valid = this.validate();\n\t\tif (valid) {\n\t\t\tif (this.hide) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t\tthis.emit('change', { value: this.value });\n\t\t}\n\t}\n\n\tif (k === 'Escape') {\n\t\tthis.blur();\n    }\n\n    // if (k === 'Backspace') {\n    //     // this.blur();\n    //     return true;\n    // }\n    \n    \n\n    if (util.isControl(e)) {\n\t\tutil.stopEvent(e);\n\t\treturn;\n\t}\n\n\tfunction setSelection (pos) {\n\t\te.target.selectionEnd = pos;\n\t}\n\n    if (!util.isNum(k)) {\n\t\tlet value = this.input.value;\n\n\t\t// handle paste, backspace\n\t\tif (type === 'datetime' && k === ' ' && util.charCount(value, ' ') !== 2) {\n\t\t\t// insert missing space\n\t\t\tthis.typedValue = '';\n\t\t\tvalue = value.replace(' ', '');\n\t\t\tthis.setValue(`${value.substring(0, 10)} ${value.substring(10, 15)} ${value.substring(15)}`, true);\n\t\t\tsetSelection(11);\n\t\t\tutil.stopEvent(e);\n\t\t\treturn;\n\n\t\t} else if (value !== this.typedValue) {\n\t\t\t// console.log('not typed');\n\t\t\tthis.setValue(value, true);\n\t\t}\n\n\t\tif (util.isArrowKey[k]) {\n\t\t\t// FIXME: test is not adding picker time\n\t\t\t// 12/12/2017 06:30 am'\n\t\t\tconst inc = k === 'ArrowUp' ? 1 : -1;\n\t\t\tif (/time/.test(type)) {\n\t\t\t\tconst HR = type === 'time' ? [0,2] : [11,13];\n\t\t\t\tconst MN = type === 'time' ? [3,5] : [14,16];\n\t\t\t\tif (end >= HR[0] && end <= HR[1]) {\n\t\t\t\t\tthis.setValue(util.incHours(value, inc), true);\n\t\t\t\t} else if (end >= MN[0] && end <= MN[1]) {\n\t\t\t\t\tthis.setValue(util.incMinutes(value, inc, 15), true);\n\t\t\t\t} else if (type === 'time' || beg > 16) {\n\t\t\t\t\tthis.setValue(value.replace(/([ap]m)/i, str => /a/i.test(str) ? 'pm' : 'am' ), true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (/date/.test(type)) {\n\t\t\t\tif (end <= 2 ) {\n\t\t\t\t\tthis.setValue(util.incMonth(value, inc), true);\n\t\t\t\t} else if (end < 5) {\n\t\t\t\t\tthis.setValue(util.incDate(value, inc), true);\n\t\t\t\t} else if (end < 11) {\n\t\t\t\t\tthis.setValue(util.incYear(value, inc), true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else if (/[ap]/i.test(k) && /time/.test(type)) {\n\t\t\tthis.setValue(this.setAMPM(value, k === 'a' ? 'am' : 'pm'), true);\n\t\t} else {\n\t\t\t//console.log('CHAR IS', k);\n\t\t}\n\n\t\tsetSelection(beg);\n\t\tutil.stopEvent(e);\n\t\treturn;\n\t}\n\n    if (str.length !== end && beg === end) {\n\t\t// handle selection or middle-string edit\n\t\tlet temp = this.typedValue.substring(0, beg) + k + this.typedValue.substring(end + 1);\n\t\tconst nextCharPos = util.nextNumPos(beg + 1, temp);\n\t\tconst value = this.setValue(temp, true);\n\t\tconst nextChar = str.charAt(beg + 1);\n\n\t\tsetSelection(/[\\s\\/:]/.test(nextChar) ? beg + 2 : beg + 1);\n\t\tutil.stopEvent(e);\n\t\treturn;\n\n    } else if (end !== beg) {\n\t\t// selection replace\n\t\tlet temp = util.replaceText(this.typedValue, k, beg, end, 'X');\n\t\tconst value = this.setValue(temp, true);\n\n\t\tsetSelection(beg + 1);\n\t\tutil.stopEvent(e);\n\t\treturn;\n\t}\n\n\n\tthis.setValue(str + k, true);\n}\n\nmodule.exports = onKey;\n","require('../src/ui-checkbox');\nrequire('../src/ui-input');\nrequire('../src/ui-list');\nrequire('../src/ui-popup');\nrequire('../src/ui-dropdown');\nrequire('../src/ui-search');\nrequire('../src/ui-tooltip');\nrequire('../src/ui-drawer');\nrequire('../src/date-picker/date-picker');\nrequire('../src/date-picker/date-input');\n\nrequire('../src/styles/main.scss');","const BaseComponent = require('@clubajax/base-component');\nconst dom = require('@clubajax/dom');\nconst FormElement = require('./lib/BaseField');\nconst uid = require('./lib/uid');\nrequire('./ui-icon');\n\n// CHECKED NOTE:!\n// widget.checked *is* a getter/setter\n// the visual keys off of the attribute\n//\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/checkbox\n\nclass CheckBox extends FormElement {\n\n    // attributeChanged(prop, value) {\n    //     if (prop === 'value') {\n    //         this.value = value;\n    //     }\n    // }\n\n    get value() {\n        return this.indeterminate ? null : Boolean(this.checked);\n    }\n\n    set value(value) {\n        this.checked = value;\n    }\n\n    get event() {\n        return {\n            value: this.value,\n            checked: this.checked,\n            name: this.name\n        }\n    }\n\n    onChecked(value) {\n        if (this.indeterminate) {\n            this.indeterminate = false;\n            this.input.type = 'check';\n        }\n        dom.attr(this.input, 'aria-checked', `${value}`);\n    }\n\n    onIndeterminate(value) {\n        if (value) {\n            this.input.type = 'minus';\n        }\n    }\n\n    setValue(value, silent) {\n        this.value = value;\n        if (!silent && this.canEmit()) {\n            this.emitEvent();\n        }\n    }\n\n    toggle() {\n        this.checked = !this.checked;\n        if (this.canEmit()) {\n            this.emitEvent();\n        } else {\n            this.fire('toggle', {value: this.value});\n        }\n    }\n\n    connected() {\n        this.render();\n\n        this.on('keyup', (e) => {\n            if (!this.canEmit()) {\n                return;\n            }\n            if (e.key === 'Enter' || e.key === 'Spacebar' || e.key === ' ') {\n                this.toggle();\n            }\n        });\n        this.on('click', (e) => {\n            if (!this.canEmit()) {\n                return;\n            }\n            this.toggle();\n        });\n\n        this.connected = () => {};\n    }\n\n    render() {\n        const type = this.indeterminate ? 'minus' : 'check';\n        const html = this.label || '';\n        const chkId = this.label ? (this.id || uid('checkbox')) : null;\n        const lblId = this.label ? (this.id || uid('label')) : null;\n        this.setAttribute('tabindex', '0');\n        this.input = dom('ui-icon', {type, id: chkId, role: 'checkbox', 'aria-labelledby': lblId, 'aria-checked': false});\n        this.labelNode = dom('span', {html, class: 'ui-label', 'for': chkId, id: lblId});\n\n        if (!this['check-after']) {\n            this.appendChild(this.input);\n            this.appendChild(this.labelNode);\n        } else {\n            this.appendChild(this.labelNode);\n            this.appendChild(this.input);\n        }\n\n        dom.attr(this, 'label', false);\n    }\n}\n\nmodule.exports = BaseComponent.define('ui-checkbox', CheckBox, {\n    bools: ['checked', 'check-after', 'indeterminate'],\n    // attrs: ['value']\n});\n","const BaseComponent = require('@clubajax/base-component');\nconst dom = require('@clubajax/dom');\nconst emitEvent = require('./emitEvent');\n\nclass FormElement extends BaseComponent {\n\n    onReadonly(value) {\n        dom.attr(this, 'tabindex', value ? false : '0');\n    }\n\n    onDisabled(value) {\n        dom.attr(this, 'tabindex', value ? false : '0');\n    }\n\n    onLabel(value) {\n        if (this.labelNode) {\n            this.labelNode.innerHTML = value;\n        }\n    }\n\n    canEmit() {\n        return !this['no-event'] && !this.readonly && !this.disabled;\n    }\n\n    emitEvent() {\n        const event = this.event || {\n            value: this.value,\n            name: this.name\n        };\n        emitEvent(this, event);\n    }\n\n}\n\nmodule.exports = BaseComponent.define('ui-form-element', FormElement, {\n    props: ['label', 'name', 'event-name', 'placeholder'],\n    bools: ['no-event', 'disabled', 'readonly', 'autofocus', 'required'],\n    attrs: ['value']\n});\n","// https://fontawesome.com/icons?d=gallery&c=interfaces&m=free\nconst map = {\n    check: 'fas fa-check',\n    minus: 'fas fa-minus',\n    plus: 'fas fa-plus',\n    books: 'fas fa-book-reader',\n    chess: 'fas fa-chess-rook',\n    error: 'fas fa-exclamation-circle',\n    warning: 'fas fa-exclamation-triangle',\n    caretDown: 'fas fa-caret-down',\n    angleLeft: 'fas fa-angle-left',\n    angleRight: 'fas fa-angle-right',\n    search: 'fas fa-search',\n    spinner: 'fas fa-sync-alt',\n    calendar: 'far fa-calendar-alt',\n\n    'folder': 'far fa-folder',\n    'file': 'far fa-file-alt',\n    'file-archive': 'far fa-file-archive',\n    'file-audio': 'far far fa-file-audio',\n    'file-code': 'far far fa-file-code',\n    'file-image': 'far far fa-file-image',\n    'file-pdf': 'far far fa-file-pdf',\n    'file-video': 'far far fa-file-video',\n    'file-excel': 'far far fa-file-excel',\n    'file-powerpoint': 'far far fa-file-powerpoint',\n    'file-word': 'far far fa-file-word'\n};\n\n\nmodule.exports = map;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__18__;","const BaseComponent = require('@clubajax/base-component');\nconst dom = require('@clubajax/dom');\nconst uid = require('./lib/uid');\nconst emitEvent = require('./lib/emitEvent');\nrequire('./ui-popup');\nrequire('./ui-list');\nrequire('./ui-icon');\n\n// ref\n// https://blog.mobiscroll.com/how-to-do-multiple-selection-on-mobile/\n\n\n// TODO remove and append popup\n//  disconnected is faster than destroy\n//  kill popup\n//  update ReactWebComponent\n//\n\nconst DEFAULT_PLACEHOLDER = 'Select One...';\n\nclass UiDropdown extends BaseComponent {\n    constructor() {\n        super();\n        this.sortdesc\n        this.sortasc;\n        this.label;\n        this.placeholder;\n        this.lastValue = null;\n    }\n     \n    set value(value) {\n        this.lastValue = value;\n        if (this.list) {\n            this.list.value = value;\n        } else {\n            this.onDomReady(() => {\n                this.list.value = value;\n            });\n        }\n        this.__value = value;\n    }\n\n    get value() {\n        if (!this.list) {\n            return this.__value || this.getAttribute('value');\n        }\n        return this.list.value;\n    }\n\n    set data(data) {\n        this.onDomReady(() => {\n            const value = getValueFromList(data);\n            if (value) {\n                this.value = value;\n            }\n            this.list.data = data;\n            if (this['size-to-popup'] || this['autosized']) {\n                this.sizeToPopup();\n            }\n        });\n        this.__data = data;\n    }\n\n    get data() {\n        return this.list ? this.list.items : this.__data;\n    }\n\n    setDisplay() {\n        this.button.innerHTML = '';\n        \n        const item = this.list ? this.list.getItem(this.value) : {};\n        this.__value = item ? item.value : this.__value;\n        dom('span', {html: isNull(this.value) ? this.placeholder || DEFAULT_PLACEHOLDER : (item.alias || item.label)}, this.button);\n        if (!this['no-arrow']) {\n            dom('ui-icon', {type: 'caretDown'}, this.button);\n        }\n        setTimeout(() => {\n            // don't resize the popup right away - wait until it closes, or it jumps\n            if (this.popup) {\n                dom.style(this.popup, {\n                    'min-width': dom.box(this.button).w\n                });\n            }\n        }, 500);\n    }\n\n    sizeToPopup() {\n        dom.style(this.button, {\n            width: dom.box(this.popup).w + 20 // allow for dropdown arrow\n        });\n    }\n\n    reset() {\n        this.list.reset();\n    }\n\n    connected() {\n        this.render();\n        this.connectEvents();\n        this.connected = () => {};\n    }\n\n    connectEvents() {\n        this.list.on('list-change', (e) => {\n            // set display, regardless of elligible event\n            this.setDisplay();\n            // ensure value is not the same,\n            // do not emit events for initialization and \n            // externally setting the value\n            if (this.lastValue + '' !== this.value + '') {\n                emitEvent(this);\n                this.lastValue = this.value;\n            }\n            setTimeout(() => {\n                this.popup.hide();\n            }, 300);\n        });\n        this.popup.on('popup-open', () => {\n            this.list.controller.scrollTo();\n            this.fire('open');\n        });\n        this.popup.on('popup-close', () => {\n            this.list.controller.scrollTo();\n            this.fire('close');\n        });\n    }\n\n    renderButton(buttonid) {\n        this.button = dom('button', {id: buttonid, class: 'ui-button drop-input'}, this);\n        this.setDisplay();\n    }\n\n    render() {\n        this.labelNode = dom('label', {html: this.label, class: 'ui-label'}, this);\n        const buttonid = uid('drop-button');\n        this.renderButton(buttonid);\n        this.list = dom('ui-list', {\n            buttonid,\n            'event-name': 'list-change',\n            sortdesc: this.sortdesc,\n            sortasc: this.sortasc\n        });\n        this.popup = dom('ui-popup', {\n            buttonid,\n            label: this.label,\n            html: this.list,\n            class: 'dropdown'\n        }, document.body);\n        this.setDisplay();\n    }\n\n    disconnected() {\n        this.popup.destroy();\n    }\n}\n\nfunction isNull(value) {\n    return value === null || value === undefined;\n}\n\nfunction getValueFromList(data) {\n    const item = data.find(m => m.selected);\n    return item ? item.value : null;\n}\n\nmodule.exports = BaseComponent.define('ui-dropdown', UiDropdown, {\n    props: ['placeholder', 'label', 'limit', 'name', 'event-name', 'align', 'btn-class', 'sortdesc', 'sortasc'],\n    bools: ['disabled', 'open-when-blank', 'allow-new', 'required', 'case-sensitive', 'autofocus', 'busy', 'no-arrow', 'size-to-popup', 'autosized'],\n    attrs: ['value']\n});\n","const BaseComponent = require('@clubajax/base-component');\nconst dom = require('@clubajax/dom');\nconst uid = require('./lib/uid');\nrequire('./ui-popup');\nrequire('./ui-list');\nrequire('./ui-icon');\nrequire('./ui-input');\n\n// https://blog.mobiscroll.com/how-to-do-multiple-selection-on-mobile/\n// https://adamsilver.io/articles/building-an-accessible-autocomplete-control/\n// data-alt\n\nconst DEFAULT_PLACEHOLDER = 'Begin typing...';\n\nclass UiSearch extends BaseComponent {\n    constructor() {\n        super();\n        this.placeholder;\n        this.busy;\n        this.label;\n    }\n    set value(value) {\n        this.onDomReady(() => {\n            this.list.value = value;\n            this.setDisplay();\n        });\n        this.__value = value;\n    }\n\n    get value() {\n        if (!this.list) {\n            return this.__value || this.getAttribute('value');\n        }\n        return this.list.value;\n    }\n\n    set data(data) {\n        this.onDomReady(() => {\n            this.list.data = data;\n            if (this.input.focused) {\n                this.popup.show();\n            }\n        });\n        this.__data = data;\n    }\n\n    get data() {\n        return this.list ? this.list.items : this.__data;\n    }\n\n    onBusy(value) {\n        this.input.icon = value ? 'spinner' : 'search';\n    }\n\n    setDisplay() {\n        const item = this.list ? this.list.getItem(this.value) : {};\n        this.__value = item ? item.value : this.__value;\n\n        this.input.value = isNull(this.value) ? '' : item.display || item.alias || item.label;\n\n        if (this.popup) {\n            dom.style(this.popup, {\n                'min-width': dom.box(this.input).w,\n            });\n        }\n    }\n\n    reset() {\n        this.list.reset();\n    }\n\n    connected() {\n        this.render();\n        this.connectEvents();\n        this.connected = () => {};\n    }\n\n    connectEvents() {\n        this.list.on('list-change', () => {\n            this.setDisplay();\n            this.emit('change', {value: this.value});\n            setTimeout(() => {\n                this.popup.hide();\n            }, 300);\n        });\n\n        this.input.on('key-search', e => {\n            this.fire('search', { value: e.detail.value });\n        });\n\n        this.input.on('focus', () => {\n            this.classList.add('is-focused');\n        });\n        \n        this.input.on('focus', () => {\n            this.classList.remove('is-focused');\n        });\n    }\n\n    renderButton(buttonid) {\n        this.input = dom(\n            'ui-input',\n            {\n                id: buttonid,\n                'event-name': 'input-change',\n                class: 'search-input',\n                placeholder: this.placeholder || DEFAULT_PLACEHOLDER,\n                icon: this.busy ? 'spinner' : 'search',\n            },\n            this\n        );\n        this.setDisplay();\n    }\n\n    render() {\n        this.labelNode = dom(\n            'label',\n            { html: this.label, class: 'ui-label' },\n            this\n        );\n        const buttonid = uid('drop-button');\n        this.renderButton(buttonid);\n        this.list = dom('ui-list', {\n            'event-name': 'list-change',\n            'external-search': true,\n            buttonid,\n        });\n        this.popup = dom(\n            'ui-popup',\n            {\n                buttonid,\n                label: this.label,\n                html: this.list,\n            },\n            document.body\n        );\n        this.setDisplay();\n    }\n}\n\nfunction isNull(value) {\n    return value === null || value === undefined;\n}\n\nmodule.exports = BaseComponent.define('ui-search', UiSearch, {\n    props: [\n        'placeholder',\n        'label',\n        'limit',\n        'name',\n        'event-name',\n        'align',\n        'btn-class',\n    ],\n    bools: [\n        'disabled',\n        'open-when-blank',\n        'allow-new',\n        'required',\n        'case-sensitive',\n        'autofocus',\n        'busy',\n    ],\n    attrs: ['value'],\n});\n","const BaseComponent = require('@clubajax/base-component');\nconst dom = require('@clubajax/dom');\nconst popup = require('./ui-popup');\n\nclass UiTooltip extends BaseComponent {\n    constructor() {\n        super();\n        this.open;\n    }\n    domReady() {\n        if (!this.value && this.innerHTML.length) {\n            this.value = this.innerHTML;\n            this.innerHTML = '';\n        }\n        this.render();\n    }\n\n    render() {\n        const align = this.align || 'R';\n        this.popup = dom('ui-popup', {\n            html: dom('div', {\n                class: `ui-tooltip ${this.className}`,\n                html: this.value\n            }),\n            buttonid: this.parentNode,\n            'use-hover': true,\n            align,\n            'hide-timer': this['hide-timer'],\n            open: this.open\n        }, document.body);\n    }\n\n    destroy() {\n        super.destroy();\n        this.popup.destroy();\n    }\n}\n\nmodule.exports = BaseComponent.define('ui-tooltip', UiTooltip, {\n    props: ['align', 'hide-timer'],\n    attrs: ['value', 'open']\n});\n\n","const BaseComponent = require('@clubajax/base-component');\nconst dom = require('@clubajax/dom');\nconst on = require('@clubajax/on');\n\nclass UiDrawer extends BaseComponent {\n    constructor() {\n        super();\n        this.isOpen = true;\n    }\n\n    set open(_open) {\n        this.isOpen = _open;\n        this.setOpen(_open);\n    }\n\n    get open() {\n        return this.isOpen;\n    }\n\n    setOpen(_open) {\n        const dim = this.vertical ? 'height' : 'width';\n        if (!_open) {\n            \n            if (!this.style[dim]) {\n                setSize(this, dim);\n            }\n            setTimeout(() => {\n                dom.style(this, {\n                    [dim]: this['closed-size'] || 0,\n                });\n            }, 1);\n        } else {\n            getSize(this);\n            setTimeout(() => {\n                dom.style(this, {\n                    [dim]: getSize(this)[dim],\n                });\n            }, 1);\n        }\n    }\n\n    connected() {\n        const isOpen = dom.normalize(dom.attr(this, 'open'));\n        if (isOpen === false) {\n            this.isOpen = false;\n            this.setOpen(false);\n        }\n        this.classList.add('animate');\n        this.classList.add('show');\n\n        this.on('transitionend', () => {\n            const eventName = this.isOpen ? 'open' : 'closed';\n            this.emit(eventName);\n        });\n    }\n}\n\nfunction setSize(node, dim) {\n    node.openWidth = node.offsetWidth;\n    node.openHeight = node.offsetHeight;\n    if (dim === 'width') {\n        dom.style(node, 'width', node.openWidth);\n    } else {\n        dom.style(node, 'height', node.offsetHeight);\n    }\n    \n}\n\nfunction getSize(node) {\n    if (!node.openWidth) {\n        node.classList.remove('animate');\n        const widthStyle = dom.style(node, 'width');\n        const heightStyle = dom.style(node, 'height');\n        dom.style(node, {\n            width: '',\n            height: ''\n        });\n        node.openWidth = node.offsetWidth;\n        node.openHeight = node.offsetHeight;\n        node.classList.add('animate');\n        dom.style(node, {\n            width: widthStyle,\n            height: heightStyle\n        });\n    }\n    return {\n        width: node.openWidth,\n        height: node.openHeight\n    };\n}\n\nmodule.exports = BaseComponent.define('ui-drawer', UiDrawer, {\n    props: ['closed-size'],\n    bools:['vertical']\n});\n","const BaseComponent = require('@clubajax/base-component');\nconst dom = require('@clubajax/dom');\nconst on = require('@clubajax/on');\nconst dates = require('@clubajax/dates');\nconst util = require('./util');\nconst onKey = require('./onKey');\nconst isValid = require('./isValid');\n\nconst defaultPlaceholder = 'HH:MM am/pm';\nconst defaultMask = 'XX:XX';\nconst EVENT_NAME = 'change';\n\n\nclass TimeInput extends BaseComponent {\n\n\tattributeChanged (name, value) {\n\t\t// need to manage value manually\n\t\tif (name === 'value') {\n\t\t\tthis.value = value;\n\t\t}\n\t}\n\n\tset value (value) {\n\t\tif (dates.isValidObject(value)) {\n\t\t\t// this.orgDate = value;\n\t\t\t// this.setDate(value);\n\t\t\tvalue = dates.format(value, 'h:m a');\n\t\t\tthis.setAMPM(value);\n\t\t}\n\t\tthis.strDate = util.stripDate(value);\n\t\tonDomReady(this, () => {\n\t\t\tthis.setValue(this.strDate);\n\t\t});\n\t}\n\n\tget value () {\n\t\treturn this.strDate;\n\t}\n\n\tget valid () {\n\t\treturn this.isValid();\n\t}\n\n\tonLabel (value) {\n\t\tthis.labelNode.innerHTML = value;\n\t}\n\n\tonMin (value) {\n\t\t// this.minTime = dates.format(util.getMinTime(value), 'h:m a');\n\t\tthis.minDate = util.getMinDate(value);\n\t\tthis.validate();\n\t}\n\n\tonMax (value) {\n\t\t// this.maxTime = dates.format(util.getMaxTime(value), 'h:m a');\n\t\tthis.maxDate = util.getMaxDate(value);\n\t\tthis.validate();\n\t}\n\n\tget templateString () {\n\t\treturn `\n<label>\n\t<span ref=\"labelNode\"></span>\n\t<input ref=\"input\" class=\"empty\" />\n</label>`;\n\t}\n\n\tconstructor () {\n\t\tsuper();\n\t\tthis.dateType = 'time';\n\t\tthis.typedValue = '';\n\t}\n\n    setValue(value, silent, ampm) {\n\t\tlet valid = this.validate(value);\n\t\tconst isReady = /[ap]m/i.test(value) || value.replace(/(?!X)\\D/g, '').length >= 4;\n\t\tif (isReady) {\n\t\t\tthis.setAMPM(value, getAMPM(value, ampm));\n\t\t\tvalue = util.formatTime(value);\n\t\t\tif (value.length === 5) {\n\t\t\t\tvalue = this.setAMPM(value);\n\t\t\t}\n\t\t}\n\n\t\tthis.typedValue = value;\n\t\tthis.input.value = value;\n\t\tvalid = this.validate();\n\n\t\tif (valid) {\n\t\t\tthis.strDate = value;\n\t\t\tif (!silent) {\n\t\t\t\tthis.emitEvent();\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tsetDate (value) {\n\t\t// sets the current date, but not the time\n\t\t// used when inside a date picker for min/max\n\t\tthis.date = value;\n\t\tthis.validate();\n\t}\n\n\tisValid (value = this.input.value) {\n\t\tif (this.date) {\n\t\t\tif (/X/.test(value)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvalue = dates.format(util.addTimeToDate(value, this.date), 'MM/dd/yyyy h:m a');\n\t\t}\n\t\treturn isValid.call(this, value, this.dateType);\n\t}\n\n\tvalidate () {\n\t\tif (this.isValid()) {\n\t\t\tthis.classList.remove('invalid');\n\t\t\tthis.emitError(null);\n\t\t\treturn true;\n\t\t}\n\t\tthis.classList.add('invalid');\n\t\treturn false;\n\t}\n\n\tonChange (e) {\n\t\tif (this.date && this.isValid(e.target.value)) {\n\t\t\tthis.setValue(e.target.value, true);\n\t\t\tthis.emitEvent(true);\n\t\t}\n\t}\n\n\tsetAMPM (value, ampm) {\n\t\tlet isAM;\n\t\tif (ampm) {\n\t\t\tisAM = /a/i.test(ampm);\n\t\t} else if (/[ap]/.test(value)) {\n\t\t\tisAM = /a/i.test(value);\n\t\t} else {\n\t\t\tisAM = this.isAM;\n\t\t}\n\t\tvalue = value.replace(/\\s*[ap]m/i, '') + (isAM ? ' am' : ' pm');\n\t\tthis.isAM = isAM;\n\t\tthis.isPM = !isAM;\n\t\treturn value;\n\t}\n\n\tfocus () {\n\t\tthis.onDomReady(() => {\n\t\t\tthis.input.focus();\n\t\t});\n\t}\n\n\tblur () {\n\t\tthis.onDomReady(() => {\n\t\t\tthis.input.blur();\n\t\t\tthis.validate();\n\t\t\tthis.emitEvent();\n\t\t})\n\t}\n\n\tdomReady () {\n\t\tthis.mask = this.mask || defaultMask;\n\t\tthis.maskLength = this.mask.match(/X/g).join('').length;\n\t\tthis.input.setAttribute('type', 'text');\n\t\tthis.input.setAttribute('placeholder', this.placeholder || defaultPlaceholder);\n\t\tif (this.name) {\n\t\t\tthis.input.setAttribute('name', this.name);\n\t\t}\n\t\tif (this.label) {\n\t\t\tthis.labelNode.innerHTML = this.label;\n\t\t}\n\t\tthis.eventName = this['event-name'] || EVENT_NAME;\n\t\tthis.emitType = this.eventName === EVENT_NAME ? 'emit' : 'fire';\n\t\tthis.connectKeys();\n\t}\n\n\temitEvent (silent) {\n\t\tconst value = this.value;\n\t\tif (value === this.lastValue || !this.isValid(value)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.lastValue = value;\n\t\tthis[this.emitType](this.eventName, { value, silent }, true);\n\t}\n\n\temitError (msg) {\n\t\tif (msg === this.validationError) {\n\t\t\treturn;\n\t\t}\n\t\tthis.validationError = msg;\n\t\tthis.fire('validation', { message: msg }, true);\n\t}\n\n\tconnectKeys () {\n\t\tthis.on(this.input, 'keypress', util.stopEvent);\n\t\tthis.on(this.input, 'keyup', (e) => {\n\t\t\tonKey.call(this, e, this.dateType);\n\t\t\tthis.onChange(e);\n\t\t});\n        this.on(this.input, 'blur', () => this.blur.bind(this));\n\t\tthis.on(this.input, 'input', (e) => this.onChange.bind(this));\n\t}\n}\n\nfunction getAMPM (value, ampm) {\n\tif (ampm) {\n\t\treturn ampm;\n\t}\n\tif (/a/i.test(value)) {\n\t\treturn 'am';\n\t}\n\tif (/p/i.test(value)) {\n\t\treturn 'pm';\n\t}\n\treturn '';\n}\n\nmodule.exports = BaseComponent.define('time-input', TimeInput, {\n\tbools: ['required', 'range-expands'],\n\tprops: ['label', 'name', 'placeholder', 'mask', 'event-name', 'min', 'max'],\n\tattrs: ['value']\n});\n","require('./date-picker');\nconst BaseComponent = require('@clubajax/base-component');\nconst dom = require('@clubajax/dom');\nconst dates = require('@clubajax/dates');\nconst util = require('./util');\nconst onKey = require('./onKey');\nconst isValid = require('./isValid');\n// const focusManager = require('./focusManager');\nconst uid = require('../lib/uid');\nrequire('../ui-popup');\nrequire('../ui-icon');\n\nconst defaultPlaceholder = 'MM/DD/YYYY';\nconst defaultMask = 'XX/XX/XXXX';\n\nconst FLASH_TIME = 1000;\n\n// BIG TODO:\n// create a separate DIST for calendar\n//\n// TODO: \n//      disabled, read only\n//      clean up unused properties\n//      now for value (not just min & max)\n// change 'static' property name\n// mask throws errors\n\n\nclass DateInput extends BaseComponent {\n\tconstructor () {\n\t\tsuper();\n\t\tthis.dateType = 'date';\n        this.showing = false;\n        this.fireOwnDomready = true;\n        this.static;\n        this.labelNode;\n        this.errorNode;\n        this.input;\n        this.hasTime;\n        this.name;\n        this.label;\n        this.placeholder;\n\t}\n\n\tattributeChanged (name, value) {\n\t\t// need to manage value manually\n        if (name === 'value') {\n\t\t\tthis.value = value;\n\t\t}\n\t}\n\n\tset value (value) {\n\t\tif (value === this.strDate) {\n\t\t\treturn;\n\t\t}\n\t\tconst isInit = !this.strDate;\n\t\tvalue = dates.padded(value);\n\n\t\tthis.strDate = dates.isValid(value) ? value : '';\n\t\tthis.onDomReady(() => {\n\t\t\tthis.setValue(this.strDate, isInit);\n\t\t});\n\t}\n\n\tget value () {\n\t\treturn this.strDate;\n\t}\n\n\tget valid () {\n\t\treturn this.isValid();\n\t}\n\n\tonLabel (value) {\n\t\tthis.labelNode.innerHTML = value;\n\t}\n\n    onMin(value) {\n        this.onDomReady(() => {\n            console.log('MIN::', value, dates.toDate(value));\n            this.minDate = util.getMinDate(value === 'now' ? new Date() : dates.toDate(value));\n            this.picker.min = value;\n        });\n\t}\n\n    onMax(value) {\n        this.onDomReady(() => {\n            this.maxDate = util.getMaxDate(value === 'now' ? new Date() : dates.toDate(value));\n            this.picker.max = value;\n        });\n    }\n    \n    onValidation (e) {\n        this.errorNode.innerHTML = e.detail.message || '';\n    }\n\n    get templateString() {\n        this.buttonId = uid('button'); \n\t\treturn `\n<label>\n\t<span ref=\"labelNode\"></span>\n\t<div class=\"date-input-wrapper\">\n\t\t<input ref=\"input\" class=\"empty\" />\n        <button class=\"icon-button\" id=${this.buttonId} ref=\"icon\" aria-expanded=\"false\" aria-label=\"Date Picker\">\n            <ui-icon type=\"calendar\" />\n        </button>\n    </div>\n    <div class=\"input-error\" ref=\"errorNode\"></div>\n</label>`;\n\t}\n\n\tsetValue (value, silent) {\n\t\tif (value === this.typedValue) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.dateType === 'datetime' && value.length === 10 && this.typedValue.length > 16) { // 19 total\n\t\t\tvalue = util.mergeTime(value, this.typedValue);\n\t\t}\n\t\tvalue = this.format(value);\n\t\tthis.typedValue = value;\n\t\tthis.input.value = value;\n        const valid = this.validate();\n\t\tif (valid) {\n\t\t\tthis.strDate = value;\n\t\t\tthis.picker.value = value;\n\t\t\tif (!silent) {\n\t\t\t\tthis.emitEvent();\n\t\t\t}\n\t\t}\n\n\t\tif (!silent && valid) {\n\t\t\tsetTimeout(this.hide.bind(this), 300);\n\t\t}\n\t\treturn value;\n\t}\n\n\temitEvent () {\n\t\tconst value = this.value;\n\t\tif (value === this.lastValue || !this.isValid(value)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.lastValue = value;\n\t\tthis.emit('change', { value });\n\t}\n\n\tformat (value) {\n\t\treturn  util.formatDate(value, this.mask);\n\t}\n\n\tisValid (value = this.input.value) {\n\t\treturn isValid.call(this, value, this.dateType);\n\t}\n\n\tvalidate () {\n\t\tif (this.isValid()) {\n\t\t\tthis.classList.remove('invalid');\n\t\t\treturn true;\n\t\t}\n\t\tthis.classList.add('invalid');\n\t\treturn false;\n\t}\n\n\tflash (addFocus) {\n\t\tthis.classList.add('warning');\n\t\tsetTimeout(() => {\n\t\t\tthis.classList.remove('warning');\n\t\t}, FLASH_TIME);\n\n\t\tif(addFocus){\n\t\t\tthis.focus();\n\t\t}\n\t}\n\n\tshow () {\n\t\tif (this.showing) {\n\t\t\treturn;\n        }\n        this.popup.show();\n\t\tthis.showing = true;\n\t\tthis.picker.onShow();\n        this.picker.classList.add('show');\n        this.picker.focus();\n\t}\n\n\thide () {\n        if (this.static || !this.showing || window.keepPopupsOpen) {\n\t\t\treturn;\n        }\n        this.popup.hide();\n\t\tthis.showing = false;\n\t\tthis.picker.onHide();\n\t}\n\n\tfocus () {\n\t\tthis.onDomReady(() => {\n\t\t\tthis.input.focus();\n\t\t});\n\t}\n\n\tblur () {\n\t\tif (this.input) {\n\t\t\tthis.input.blur();\n\t\t}\n\t}\n\n\tonBlur () {\n\t\tconst valid = this.validate();\n\t\tif (valid) {\n\t\t\tthis.emitEvent();\n\t\t} else {\n\t\t\tthis.reset();\n\t\t}\n\t}\n\n\treset () {\n\t\tthis.typedValue = '';\n\t\tthis.setValue(this.strDate || '', true);\n\t}\n\n    domReady() {\n\t\tthis.time = this.time || this.hasTime;\n\t\tthis.mask = this.mask || defaultMask;\n\t\tthis.input.setAttribute('type', 'text');\n\t\tthis.input.setAttribute('placeholder', this.placeholder || defaultPlaceholder);\n\t\tif (this.name) {\n\t\t\tthis.input.setAttribute('name', this.name);\n\t\t}\n\t\tif (this.label) {\n\t\t\tthis.labelNode.innerHTML = this.label;\n\t\t}\n\t\tthis.connectKeys();\n\n        this.popup = dom('ui-popup', {buttonid: this.buttonId, class: 'ui-date-input'}, document.body);\n        this.picker = dom('date-picker', {time: this.time, tabindex: '0', 'event-name': 'date-change'}, this.popup);\n        \n        this.picker.onDomReady(() => {\n\t\t\tthis.picker.on('date-change', (e) => {\n                this.setValue(e.detail.value, e.detail.silent);\n                this.hide();\n            });\n            this.popup.on('popup-open', () => {\n                this.show();\n            });\n        });\n        \n        window.onDomReady([this.picker, this.popup], () => {\n            if (this.static) {\n                this.show();\n            }\n            this.fire('domready');\n        })\n\t}\n\n\tconnectKeys () {\n\t\tthis.on(this.input, 'keypress', util.stopEvent);\n\t\tthis.on(this.input, 'keyup', (e) => {\n\t\t\tonKey.call(this, e, this.dateType);\n\t\t});\n        this.on(this.input, 'blur', this.onBlur.bind(this));\n        this.on(this, 'validation', this.onValidation.bind(this));\n\t}\n\n\tdestroy () {\n\t\tif (this.focusHandle) {\n\t\t\tthis.focusHandle.remove();\n\t\t}\n\t}\n}\n\nmodule.exports = BaseComponent.define('date-input', DateInput, {\n\tbools: ['required', 'time', 'static'],\n\tprops: ['label', 'name', 'placeholder', 'mask', 'min', 'max', 'time', 'validation'],\n\tattrs: ['value']\n});\n"],"sourceRoot":""}